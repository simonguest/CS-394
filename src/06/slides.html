<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-597958c53c93a607afca12fd375c57ed.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.26">

  <title>CS-394 – Module 6: Increasing Model Accuracy (Part 1)</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #24292e;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #24292e; } /* Normal */
    code span.al { color: #ff5555; font-weight: bold; } /* Alert */
    code span.an { color: #6a737d; } /* Annotation */
    code span.at { color: #d73a49; } /* Attribute */
    code span.bn { color: #005cc5; } /* BaseN */
    code span.bu { color: #d73a49; } /* BuiltIn */
    code span.cf { color: #d73a49; } /* ControlFlow */
    code span.ch { color: #032f62; } /* Char */
    code span.cn { color: #005cc5; } /* Constant */
    code span.co { color: #6a737d; } /* Comment */
    code span.cv { color: #6a737d; } /* CommentVar */
    code span.do { color: #6a737d; } /* Documentation */
    code span.dt { color: #d73a49; } /* DataType */
    code span.dv { color: #005cc5; } /* DecVal */
    code span.er { color: #ff5555; text-decoration: underline; } /* Error */
    code span.ex { color: #d73a49; font-weight: bold; } /* Extension */
    code span.fl { color: #005cc5; } /* Float */
    code span.fu { color: #6f42c1; } /* Function */
    code span.im { color: #032f62; } /* Import */
    code span.in { color: #6a737d; } /* Information */
    code span.kw { color: #d73a49; } /* Keyword */
    code span.op { color: #24292e; } /* Operator */
    code span.ot { color: #6f42c1; } /* Other */
    code span.pp { color: #d73a49; } /* Preprocessor */
    code span.re { color: #6a737d; } /* RegionMarker */
    code span.sc { color: #005cc5; } /* SpecialChar */
    code span.ss { color: #032f62; } /* SpecialString */
    code span.st { color: #032f62; } /* String */
    code span.va { color: #e36209; } /* Variable */
    code span.vs { color: #032f62; } /* VerbatimString */
    code span.wa { color: #ff5555; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto-eeafb82a00776dbd0312b01cd21cfa25.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Module 6: Increasing Model Accuracy (Part 1)</h1>

<div class="quarto-title-authors">
</div>

</section>
<section id="recap" class="slide level2">
<h2>Recap</h2>
<ul>
<li class="fragment">Understood the use cases, advantages/disadvantages for running models on local hardware - desktop, web, mobile</li>
<li class="fragment">Understood hardware requirements and architectures for model inference - e.g., CUDA vs.&nbsp;ONNX vs.&nbsp;MLX vs.&nbsp;WebGPU</li>
<li class="fragment">Explored how quantization works and understood techniques and formats for quantizing existing models</li>
<li class="fragment">Used llama.cpp to quantize and run an SLM on local hardware/gaming PC</li>
<li class="fragment">Integrated a quantized model within Unity/Unreal/WebAssembly</li>
</ul>
</section>
<section id="lesson-objectives" class="slide level2">
<h2>Lesson Objectives</h2>
<ul>
<li class="fragment">Understand model training, dataset curation, what leads to hallucinations in models, how models are evaluated, and an overview of techniques to increase accuracy</li>
<li class="fragment">Explore use cases, advantages, and disadvantages of prompt engineering</li>
<li class="fragment">Introduce and implement RAG (Retrieval-Augmented Generation) to increase the accuracy of a limited SLM</li>
<li class="fragment">Start exploring how to fine-tune models using LoRA (Low Ranked Adaptation)</li>
<li class="fragment">Generate synthetic data for fine-tuning a 1B parameter model</li>
</ul>
</section>
<section>
<section id="hallucinations" class="title-slide slide level1 center">
<h1>Hallucinations</h1>

</section>
<section id="hallucinations-1" class="slide level2">
<h2>Hallucinations</h2>
<ul>
<li class="fragment">Models hallucinate!
<ul>
<li class="fragment">Especially noticable on older and smaller models</li>
<li class="fragment">Many hallucinations can be difficult to spot as they sound so plausible</li>
<li class="fragment">Plausible sounding requests (i.e., asking about something that doesn’t exist) often results in a hallucination</li>
</ul></li>
</ul>
</section>
<section id="hallucinations-2" class="slide level2">
<h2>Hallucinations</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/hallucinations.ipynb" data-notebook-title="Hallucinations" data-notebook-cellid="setup-client">
<div id="setup-client" class="cell" data-execution_count="7">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a></a>MODEL <span class="op">=</span> <span class="st">"meta-llama/llama-3.2-1b-instruct"</span></span>
<span id="cb1-2"><a></a></span>
<span id="cb1-3"><a></a><span class="im">import</span> openai</span>
<span id="cb1-4"><a></a></span>
<span id="cb1-5"><a></a>client <span class="op">=</span> openai.OpenAI(</span>
<span id="cb1-6"><a></a>    base_url<span class="op">=</span><span class="st">'https://openrouter.ai/api/v1'</span>,</span>
<span id="cb1-7"><a></a>    api_key<span class="op">=</span>os.environ[<span class="st">"OPENROUTER_API_KEY"</span>],</span>
<span id="cb1-8"><a></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="hallucinations-citations" class="slide level2">
<h2>Hallucinations: Citations</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/hallucinations.ipynb" data-notebook-title="Hallucinations" data-notebook-cellid="hallucinate-1">
<div id="hallucinate-1" class="cell" data-execution_count="8">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a></a>response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb2-2"><a></a>    model<span class="op">=</span>MODEL,</span>
<span id="cb2-3"><a></a>    messages<span class="op">=</span>[</span>
<span id="cb2-4"><a></a>        {<span class="st">"role"</span>: <span class="st">"system"</span>, <span class="st">"content"</span>: <span class="st">"You help students generate citations for their coursework."</span>},</span>
<span id="cb2-5"><a></a>        {<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: <span class="st">"Can you cite three academic papers on transfomer efficiency. I'm looking for the author names, journals, years, and titles."</span>},</span>
<span id="cb2-6"><a></a>    ],</span>
<span id="cb2-7"><a></a>)</span>
<span id="cb2-8"><a></a>response.choices[<span class="dv">0</span>].message.content</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="hallucinations-citations-1" class="slide level2">
<h2>Hallucinations: Citations</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/hallucinations.ipynb" data-notebook-title="Hallucinations" data-notebook-cellid="hallucinate-1">
<div id="hallucinate-1" class="cell" data-execution_count="8">
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>'Here are three academic papers on transformer efficiency:\n\n1. **"Attention is a Limited Resource: The Case for Unique Attention Mechanisms in Deep Neural Networks"**\n\nAuthor: Vaswani et al.\n\nJournal: Nature\n\nYear: 2017\n\nTitle: Attention is a Limited Resource: The Case for Unique Attention Mechanisms in Deep Neural Networks\n\nThis paper proposes a new approach to attention mechanisms in deep neural networks, which suggests that attention is not just a simple linear scaling of the input features, but rather a complex mechanism that involves multiple stages and attention weights. The authors demonstrate that this approach can improve the performance of deep neural networks on various tasks.\n\n2. **"Attention is All You Need"**\n\nAuthor: Vaswani et al.\n\nJournal: Nature\n\nYear: 2017\n\nTitle: Attention is All You Need\n\nThis paper presents a new approach to attention mechanisms in deep neural networks, which suggests that attention is not just a simple linear scaling of the input features, but rather a complex mechanism that involves multiple stages and attention weights. The authors demonstrate that this approach can improve the performance of deep neural networks on various tasks.\n\n3. **"Attention is a Key to Efficient Neural Network Training"**\n\nAuthor: He et al.\n\nJournal: Proceedings of the 32nd International Conference on Machine Learning (ICML)\n\nYear: 2015\n\nTitle: Attention is a Key to Efficient Neural Network Training\n\nThis paper presents a new approach to attention mechanisms in deep neural networks, which suggests that attention is a key factor in improving the efficiency of neural network training. The authors demonstrate that attention mechanisms can significantly improve the training speed and accuracy of deep neural networks on various tasks.\n\nNote: These papers are just a few examples of the many papers that have explored transformer efficiency.'</code></pre>
</div>
</div>
</div>
</section>
<section id="hallucinations-local-knowledge" class="slide level2">
<h2>Hallucinations: Local Knowledge</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/hallucinations.ipynb" data-notebook-title="Hallucinations" data-notebook-cellid="hallucinate-2">
<div id="hallucinate-2" class="cell" data-execution_count="13">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a></a>response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb4-2"><a></a>    model<span class="op">=</span>MODEL,</span>
<span id="cb4-3"><a></a>    messages<span class="op">=</span>[</span>
<span id="cb4-4"><a></a>        {<span class="st">"role"</span>: <span class="st">"system"</span>, <span class="st">"content"</span>: <span class="st">"You help provide information about software applications."</span>},</span>
<span id="cb4-5"><a></a>        {<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: <span class="st">"Tell me more about FilterGenie, software for the Mac that allows you to apply dynamic filters to images."</span>},</span>
<span id="cb4-6"><a></a>    ],</span>
<span id="cb4-7"><a></a>)</span>
<span id="cb4-8"><a></a>response.choices[<span class="dv">0</span>].message.content</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="hallucinations-local-knowledge-1" class="slide level2">
<h2>Hallucinations: Local Knowledge</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/hallucinations.ipynb" data-notebook-title="Hallucinations" data-notebook-cellid="hallucinate-2">
<div id="hallucinate-2" class="cell" data-execution_count="13">
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>"FilterGenie is a powerful image editing software for Mac that allows you to apply dynamic filters to images. It's a popular tool among photographers, graphic designers, and anyone looking to enhance and transform their images with ease.\n\nHere are some key features and benefits of FilterGenie:\n\n**Key Features:**\n\n1. **Dynamic Filters**: FilterGenie offers a wide range of dynamic filters that can be applied to images, including:\n\t* Color correction and adjustment\n\t* Noise reduction and sharpening\n\t* Texture and pattern overlays\n\t* Effects like blur, vignette, and glow\n\t* And many more!\n2. **Adjustable Parameters**: Each filter has adjustable parameters, allowing you to fine-tune the effect to your liking.\n3. **Support for Multiple Image Files**: FilterGenie supports a wide range of image file formats, including JPEG, PNG, and TIFF.\n4. **Batch Processing**: You can apply filters to multiple images at once, making it a great tool for editing multiple images in a single session.\n5. **Export Options**: FilterGenie allows you to export your edited images in various formats, including JPEG, PNG, and PSD.\n\n**Benefits:**\n\n1. **Easy to Use**: FilterGenie's intuitive interface makes it easy to apply filters to images, even for those without extensive image editing experience.\n2. **Versatile**: The software offers a wide range of filters to suit various image editing needs, from basic adjustments to more advanced effects.\n3. **High-Quality Results**: FilterGenie's filters are designed to produce high-quality results, ensuring your images look professional and polished.\n4. **Cross-Platform Compatibility**: FilterGenie is available for Mac, Windows, and Linux, making it a great option for users with multiple operating systems.\n\n**System Requirements:**\n\nTo run FilterGenie, you'll need:\n\n* Mac with macOS 10.12 or later\n* 2 GB RAM or more\n* 2 GB free disk space\n* A compatible graphics card (Intel Core i5 or later recommended)\n\n**Pricing:**\n\nFilterGenie offers a free trial version, as well as a one-time purchase option for the full version. The full version costs around $49.99 USD.\n\nOverall, FilterGenie is a powerful and versatile image editing software that's perfect for anyone looking to enhance and transform their images with dynamic filters."</code></pre>
</div>
</div>
</div>
</section>
<section id="hallucinations-summarization" class="slide level2">
<h2>Hallucinations: Summarization</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/hallucinations.ipynb" data-notebook-title="Hallucinations" data-notebook-cellid="hallucinate-3">
<div id="hallucinate-3" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a></a>response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb6-2"><a></a>    model<span class="op">=</span>MODEL,</span>
<span id="cb6-3"><a></a>    messages<span class="op">=</span>[</span>
<span id="cb6-4"><a></a>        {<span class="st">"role"</span>: <span class="st">"system"</span>, <span class="st">"content"</span>: <span class="st">"You help users summarize documents and published papers."</span>},</span>
<span id="cb6-5"><a></a>        {<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: <span class="st">"Can you summarize the key findings of the 2019 WHO report on urban air quality in South Asia."</span>},</span>
<span id="cb6-6"><a></a>    ],</span>
<span id="cb6-7"><a></a>)</span>
<span id="cb6-8"><a></a>response.choices[<span class="dv">0</span>].message.content</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="hallucinations-summarization-1" class="slide level2">
<h2>Hallucinations: Summarization</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/hallucinations.ipynb" data-notebook-title="Hallucinations" data-notebook-cellid="hallucinate-3">
<div id="hallucinate-3" class="cell">
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>"I couldn't find a specific 2019 WHO report on urban air quality in South Asia. However, I can provide some general information on the topic and highlight some key findings from previous reports.\n\nThe World Health Organization (WHO) has published several reports on air quality in South Asia, including:\n\n1. **2018 WHO Air Quality Guidelines**: In 2018, WHO published guidelines for air quality in urban areas, which emphasized the importance of reducing air pollution from domestic and industrial sources. The guidelines recommended that cities implement measures to reduce particulate matter (PM2.5) and other pollutants.\n2. **2019 WHO Air Quality Report**: In 2019, WHO published a report on air quality in South Asia, which highlighted the region's vulnerability to air pollution. The report noted that South Asia is home to some of the world's most populous cities, including Delhi, Mumbai, and Dhaka, which are among the most polluted cities in the world.\n3. **2019 WHO Air Quality Report: South Asia**: This report focused on the health impacts of air pollution in South Asia, including the estimated number of premature deaths and hospitalizations due to air pollution. The report also highlighted the need for cities to implement effective air quality management strategies to reduce pollution.\n\nSome key findings from these reports include:\n\n* **Air pollution is a major public health concern in South Asia**: The region is home to some of the world's most polluted cities, with PM2.5 levels exceeding the WHO's recommended limits in many areas.\n* **Air pollution affects vulnerable populations**: The report highlighted the disproportionate impact of air pollution on vulnerable populations, including children, the elderly, and people with pre-existing respiratory conditions.\n* **Air pollution is linked to increased mortality**: The report estimated that air pollution is responsible for an estimated 1.8 million premature deaths per year in South Asia, primarily due to respiratory diseases such as bronchitis and lung cancer.\n* **Air pollution affects economic productivity**: The report noted that air pollution can have significant economic impacts, including reduced economic productivity and increased healthcare costs.\n\nSome specific data points from the 2019 WHO Air Quality Report include:\n\n* Delhi, India: PM2.5 levels exceeded the WHO's recommended limit in 2019, with an average annual concentration of 44.4 μg/m3.\n* Mumbai, India: PM2.5 levels exceeded the WHO's recommended limit in 2019, with an average annual concentration of 35.4 μg/m3.\n* Dhaka, Bangladesh: PM2.5 levels exceeded the WHO's recommended limit in 2019, with an average annual concentration of 23.4 μg/m3.\n\nOverall, the 2019 WHO Air Quality Report highlights the urgent need for cities in South Asia to take action to reduce air pollution and protect public health."</code></pre>
</div>
</div>
</div>
</section>
<section id="why-do-models-hallucinate" class="slide level2">
<h2>Why Do Models Hallucinate?</h2>
<ul>
<li class="fragment">A language model is not a database
<ul>
<li class="fragment">It’s a stochastic prediction machine</li>
<li class="fragment">Models often don’t know how to say “I don’t know”</li>
<li class="fragment">Instead, they are designed to come up with the most plausible continuation, not to retrieve verified facts</li>
<li class="fragment">(Hallucination isn’t a bug in the traditional sense)</li>
</ul></li>
</ul>
</section>
<section id="why-do-models-hallucinate-1" class="slide level2">
<h2>Why Do Models Hallucinate?</h2>
<ul>
<li class="fragment">Models are trained on a large corpora of Internet data
<ul>
<li class="fragment">Data on the Internet is often uneven</li>
<li class="fragment">Full of gaps</li>
<li class="fragment">Often contradictory</li>
</ul></li>
</ul>
</section>
<section id="why-do-models-hallucinate-2" class="slide level2">
<h2>Why Do Models Hallucinate?</h2>
<ul>
<li class="fragment">Model Size vs.&nbsp;Training Set Size
<ul>
<li class="fragment">Many of the latest models hold billions of parameters</li>
<li class="fragment">But they are trained on trillions of tokens</li>
<li class="fragment">Thus, they can’t memorize everything and instead recognize patterns to recall information</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="model-accuracy" class="title-slide slide level1 center">
<h1>Model Accuracy</h1>

</section>
<section id="model-accuracy-1" class="slide level2">
<h2>Model Accuracy</h2>
<ul>
<li class="fragment">Intro to how models can be improved
<ul>
<li class="fragment">Better prompt engineering</li>
<li class="fragment">Reasoning/Chain of thought</li>
<li class="fragment">Context Injection, leading to RAG - Retrieval Augmented Generation</li>
</ul></li>
</ul>
</section>
<section id="prompt-engineering" class="slide level2">
<h2>Prompt Engineering</h2>
<ul>
<li class="fragment">TBD</li>
<li class="fragment">Back to the three areas we mentioned in module 2</li>
<li class="fragment">Maybe look at the system prompts</li>
</ul>
</section>
<section id="prompt-engineering-1" class="slide level2">
<h2>Prompt Engineering</h2>
<ul>
<li class="fragment">System Prompt best practices
<ul>
<li class="fragment"><strong>Be specific</strong>: “You are a Python programming tutor who explains concepts using simple analogies and provides code examples.”</li>
<li class="fragment"><strong>Define output</strong>: “List no more than 3 suggestions. Always show your work step by step.”</li>
<li class="fragment"><strong>Set boundaries</strong>: “If you are asked questions outside coding, politely redirect the student back to the task.”</li>
</ul></li>
</ul>
</section>
<section id="reasoning" class="slide level2">
<h2>Reasoning</h2>
<ul>
<li class="fragment">TBD</li>
<li class="fragment">Reasoning and Chain of Thought as ways to increase accuracy</li>
</ul>
</section>
<section id="reasoning-1" class="slide level2">
<h2>Reasoning</h2>
<ul>
<li class="fragment">TBD</li>
<li class="fragment">Prompt engineering and reasoning helps guide the model to the type of output you want - but it doesn’t solve the problem of getting the right answer</li>
<li class="fragment">Enter RAG</li>
</ul>
</section></section>
<section>
<section id="context-injection" class="title-slide slide level1 center">
<h1>Context Injection</h1>

</section>
<section id="context-injection-1" class="slide level2">
<h2>Context Injection</h2>
<ul>
<li class="fragment">A model’s training data will only only answer so much
<ul>
<li class="fragment">Training data has a cut-off: Your model won’t know anything after that</li>
<li class="fragment">Your model won’t know if anything has changed since being trained</li>
<li class="fragment">Function calling can help bridge this gap, but context injection is often simpler and more flexible</li>
</ul></li>
</ul>
</section>
<section id="context-injection-2" class="slide level2">
<h2>Context Injection</h2>
<ul>
<li class="fragment">How it works
<ul>
<li class="fragment">Take the user’s prompt (e.g., “Who teaches CS-394?”)</li>
<li class="fragment">Do a database look-up to find relevant information (context)</li>
<li class="fragment">Inject that context into the system prompt</li>
<li class="fragment">Call the model with the modified system prompt</li>
</ul></li>
</ul>
</section>
<section id="context-injection-3" class="slide level2">
<h2>Context Injection</h2>
<ul>
<li class="fragment">The injected information is called ‘context’, and adding it is called ‘augmenting’ the prompt
<ul>
<li class="fragment">Hence the popular term, augmented generation</li>
<li class="fragment">Two examples:
<ul>
<li class="fragment">SQL-Augmented Generation</li>
<li class="fragment">Retrieval-Augmented Generation</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="sql-augmented-generation" class="slide level2">
<h2>SQL-Augmented Generation</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/sql-augmented.ipynb" data-notebook-title="SQL-Augmented Generation" data-notebook-cellid="call-without">
<div id="call-without" class="cell" data-execution_count="38">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a></a>response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb8-2"><a></a>    model<span class="op">=</span>MODEL,</span>
<span id="cb8-3"><a></a>    messages<span class="op">=</span>[</span>
<span id="cb8-4"><a></a>        {<span class="st">"role"</span>: <span class="st">"system"</span>, <span class="st">"content"</span>: <span class="st">"You help students lookup course information."</span>},</span>
<span id="cb8-5"><a></a>        {<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: USER_PROMPT},</span>
<span id="cb8-6"><a></a>    ],</span>
<span id="cb8-7"><a></a>)</span>
<span id="cb8-8"><a></a>response.choices[<span class="dv">0</span>].message.content</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="sql-augmented-generation-1" class="slide level2">
<h2>SQL-Augmented Generation</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/sql-augmented.ipynb" data-notebook-title="SQL-Augmented Generation" data-notebook-cellid="call-without">
<div id="call-without" class="cell" data-execution_count="38">
<div class="cell-output cell-output-display" data-execution_count="38">
<pre><code>"I don't have access to specific course details like instructors for CS-394, as that information is typically managed by educational institutions. To find out who teaches CS-394, you could:\n\n1. Check your university/department's official course schedule or syllabus.  \n2. Contact the course instructor or department directly via email or phone.  \n3. Use your school's learning management system (e.g., Moodle, Canvas) if the course is listed there.  \n\nLet me know if you'd help drafting a message to inquire!\n"</code></pre>
</div>
</div>
</div>
</section>
<section id="sql-augmented-generation-2" class="slide level2">
<h2>SQL-Augmented Generation</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/sql-augmented.ipynb" data-notebook-title="SQL-Augmented Generation" data-notebook-cellid="create-db">
<div id="create-db" class="cell" data-execution_count="33">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a></a><span class="im">import</span> sqlite3</span>
<span id="cb10-2"><a></a><span class="im">import</span> os</span>
<span id="cb10-3"><a></a></span>
<span id="cb10-4"><a></a><span class="kw">def</span> create_and_populate_db(db_path<span class="op">=</span>DB_PATH):</span>
<span id="cb10-5"><a></a>    db_exists <span class="op">=</span> os.path.exists(db_path)</span>
<span id="cb10-6"><a></a></span>
<span id="cb10-7"><a></a>    conn <span class="op">=</span> sqlite3.<span class="ex">connect</span>(db_path)</span>
<span id="cb10-8"><a></a>    conn.row_factory <span class="op">=</span> sqlite3.Row</span>
<span id="cb10-9"><a></a>    cursor <span class="op">=</span> conn.cursor()</span>
<span id="cb10-10"><a></a></span>
<span id="cb10-11"><a></a>    <span class="cf">if</span> db_exists:</span>
<span id="cb10-12"><a></a>        <span class="bu">print</span>(<span class="ss">f"Found existing database at '</span><span class="sc">{</span>db_path<span class="sc">}</span><span class="ss">'. Skipping creation."</span>)</span>
<span id="cb10-13"><a></a>        <span class="cf">return</span> conn</span>
<span id="cb10-14"><a></a></span>
<span id="cb10-15"><a></a>    <span class="bu">print</span>(<span class="ss">f"Creating new database at '</span><span class="sc">{</span>db_path<span class="sc">}</span><span class="ss">'..."</span>)</span>
<span id="cb10-16"><a></a></span>
<span id="cb10-17"><a></a>    <span class="co"># --- Schema ---</span></span>
<span id="cb10-18"><a></a>    cursor.executescript(<span class="st">"""</span></span>
<span id="cb10-19"><a></a><span class="st">        CREATE TABLE instructors (</span></span>
<span id="cb10-20"><a></a><span class="st">            id          INTEGER PRIMARY KEY,</span></span>
<span id="cb10-21"><a></a><span class="st">            name        TEXT NOT NULL,</span></span>
<span id="cb10-22"><a></a><span class="st">            email       TEXT,</span></span>
<span id="cb10-23"><a></a><span class="st">            department  TEXT,</span></span>
<span id="cb10-24"><a></a><span class="st">            bio         TEXT</span></span>
<span id="cb10-25"><a></a><span class="st">        );</span></span>
<span id="cb10-26"><a></a></span>
<span id="cb10-27"><a></a><span class="st">        CREATE TABLE courses (</span></span>
<span id="cb10-28"><a></a><span class="st">            id              INTEGER PRIMARY KEY,</span></span>
<span id="cb10-29"><a></a><span class="st">            code            TEXT NOT NULL UNIQUE,</span></span>
<span id="cb10-30"><a></a><span class="st">            title           TEXT NOT NULL,</span></span>
<span id="cb10-31"><a></a><span class="st">            description     TEXT,</span></span>
<span id="cb10-32"><a></a><span class="st">            credits         INTEGER,</span></span>
<span id="cb10-33"><a></a><span class="st">            level           TEXT CHECK(level IN ('intro', 'intermediate', 'advanced')),</span></span>
<span id="cb10-34"><a></a><span class="st">            instructor_id   INTEGER REFERENCES instructors(id),</span></span>
<span id="cb10-35"><a></a><span class="st">            max_enrollment  INTEGER</span></span>
<span id="cb10-36"><a></a><span class="st">        );</span></span>
<span id="cb10-37"><a></a></span>
<span id="cb10-38"><a></a><span class="st">        CREATE TABLE schedules (</span></span>
<span id="cb10-39"><a></a><span class="st">            id          INTEGER PRIMARY KEY,</span></span>
<span id="cb10-40"><a></a><span class="st">            course_id   INTEGER REFERENCES courses(id),</span></span>
<span id="cb10-41"><a></a><span class="st">            days        TEXT,</span></span>
<span id="cb10-42"><a></a><span class="st">            time_start  TEXT,</span></span>
<span id="cb10-43"><a></a><span class="st">            time_end    TEXT,</span></span>
<span id="cb10-44"><a></a><span class="st">            room        TEXT,</span></span>
<span id="cb10-45"><a></a><span class="st">            semester    TEXT</span></span>
<span id="cb10-46"><a></a><span class="st">        );</span></span>
<span id="cb10-47"><a></a><span class="st">    """</span>)</span>
<span id="cb10-48"><a></a></span>
<span id="cb10-49"><a></a>    <span class="co"># --- Instructors ---</span></span>
<span id="cb10-50"><a></a>    cursor.executemany(</span>
<span id="cb10-51"><a></a>        <span class="st">"INSERT INTO instructors (name, email, department, bio) VALUES (?, ?, ?, ?)"</span>,</span>
<span id="cb10-52"><a></a>        [</span>
<span id="cb10-53"><a></a>            (<span class="st">"Dr. Sarah Chen"</span>, <span class="st">"s.chen@university.edu"</span>, <span class="st">"Computer Science"</span>,</span>
<span id="cb10-54"><a></a>             <span class="st">"Specializes in machine learning and NLP. Author of 'Practical Deep Learning'."</span>),</span>
<span id="cb10-55"><a></a>            (<span class="st">"Prof. Marcus Webb"</span>, <span class="st">"m.webb@university.edu"</span>, <span class="st">"Computer Science"</span>,</span>
<span id="cb10-56"><a></a>             <span class="st">"Focuses on systems programming and computer architecture."</span>),</span>
<span id="cb10-57"><a></a>            (<span class="st">"Dr. Priya Nair"</span>, <span class="st">"p.nair@university.edu"</span>, <span class="st">"Data Science"</span>,</span>
<span id="cb10-58"><a></a>             <span class="st">"Expert in statistical learning, data visualization, and reproducible research."</span>),</span>
<span id="cb10-59"><a></a>            (<span class="st">"Prof. James Okafor"</span>, <span class="st">"j.okafor@university.edu"</span>, <span class="st">"Computer Science"</span>,</span>
<span id="cb10-60"><a></a>             <span class="st">"Teaches software engineering and has 10 years of industry experience at major tech firms."</span>),</span>
<span id="cb10-61"><a></a>            (<span class="st">"Dr. Elena Russo"</span>, <span class="st">"e.russo@university.edu"</span>, <span class="st">"Mathematics"</span>,</span>
<span id="cb10-62"><a></a>             <span class="st">"Research interests include linear algebra, optimization, and mathematical foundations of AI."</span>),</span>
<span id="cb10-63"><a></a>        ]</span>
<span id="cb10-64"><a></a>    )</span>
<span id="cb10-65"><a></a></span>
<span id="cb10-66"><a></a>    <span class="co"># --- Courses ---</span></span>
<span id="cb10-67"><a></a>    cursor.executemany(</span>
<span id="cb10-68"><a></a>        <span class="st">"""INSERT INTO courses (code, title, description, credits, level, instructor_id, max_enrollment)</span></span>
<span id="cb10-69"><a></a><span class="st">           VALUES (?, ?, ?, ?, ?, ?, ?)"""</span>,</span>
<span id="cb10-70"><a></a>        [</span>
<span id="cb10-71"><a></a>            (<span class="st">"CS-101"</span>, <span class="st">"Introduction to Programming"</span>,</span>
<span id="cb10-72"><a></a>             <span class="st">"Fundamentals of programming using Python. Covers variables, control flow, functions, and basic data structures."</span>,</span>
<span id="cb10-73"><a></a>             <span class="dv">3</span>, <span class="st">"intro"</span>, <span class="dv">2</span>, <span class="dv">40</span>),</span>
<span id="cb10-74"><a></a>            (<span class="st">"CS-201"</span>, <span class="st">"Data Structures and Algorithms"</span>,</span>
<span id="cb10-75"><a></a>             <span class="st">"Core data structures including linked lists, trees, graphs, and hash tables. Algorithm design and complexity analysis."</span>,</span>
<span id="cb10-76"><a></a>             <span class="dv">3</span>, <span class="st">"intermediate"</span>, <span class="dv">2</span>, <span class="dv">35</span>),</span>
<span id="cb10-77"><a></a>            (<span class="st">"CS-301"</span>, <span class="st">"Machine Learning Fundamentals"</span>,</span>
<span id="cb10-78"><a></a>             <span class="st">"Supervised and unsupervised learning, model evaluation, feature engineering, and scikit-learn. Final project required."</span>,</span>
<span id="cb10-79"><a></a>             <span class="dv">4</span>, <span class="st">"intermediate"</span>, <span class="dv">1</span>, <span class="dv">30</span>),</span>
<span id="cb10-80"><a></a>            (<span class="st">"CS-394"</span>, <span class="st">"How Generative AI Works"</span>,</span>
<span id="cb10-81"><a></a>             <span class="st">"Transformer architectures, large language models, prompt engineering, fine-tuning, and deployment. Hands-on with open-source models."</span>,</span>
<span id="cb10-82"><a></a>             <span class="dv">3</span>, <span class="st">"advanced"</span>, <span class="dv">1</span>, <span class="dv">25</span>),</span>
<span id="cb10-83"><a></a>            (<span class="st">"CS-310"</span>, <span class="st">"Database Systems"</span>,</span>
<span id="cb10-84"><a></a>             <span class="st">"Relational database design, SQL, transactions, indexing, and an introduction to NoSQL systems."</span>,</span>
<span id="cb10-85"><a></a>             <span class="dv">3</span>, <span class="st">"intermediate"</span>, <span class="dv">2</span>, <span class="dv">20</span>)</span>
<span id="cb10-86"><a></a>        ]</span>
<span id="cb10-87"><a></a>    )</span>
<span id="cb10-88"><a></a></span>
<span id="cb10-89"><a></a>    <span class="co"># --- Schedules ---</span></span>
<span id="cb10-90"><a></a>    cursor.executemany(</span>
<span id="cb10-91"><a></a>        <span class="st">"""INSERT INTO schedules (course_id, days, time_start, time_end, room, semester)</span></span>
<span id="cb10-92"><a></a><span class="st">           VALUES (?, ?, ?, ?, ?, ?)"""</span>,</span>
<span id="cb10-93"><a></a>        [</span>
<span id="cb10-94"><a></a>            (<span class="dv">1</span>,  <span class="st">"Mon/Wed/Fri"</span>, <span class="st">"09:00"</span>, <span class="st">"09:50"</span>, <span class="st">"Room 101"</span>, <span class="st">"Spring 2026"</span>),</span>
<span id="cb10-95"><a></a>            (<span class="dv">2</span>,  <span class="st">"Tue/Thu"</span>,     <span class="st">"10:00"</span>, <span class="st">"11:20"</span>, <span class="st">"Room 204"</span>, <span class="st">"Spring 2026"</span>),</span>
<span id="cb10-96"><a></a>            (<span class="dv">3</span>,  <span class="st">"Mon/Wed"</span>,     <span class="st">"13:00"</span>, <span class="st">"14:20"</span>, <span class="st">"Lab 12"</span>,   <span class="st">"Spring 2026"</span>),</span>
<span id="cb10-97"><a></a>            (<span class="dv">4</span>,  <span class="st">"Tue/Thu"</span>,     <span class="st">"14:00"</span>, <span class="st">"15:20"</span>, <span class="st">"Lab 12"</span>,   <span class="st">"Spring 2026"</span>),</span>
<span id="cb10-98"><a></a>            (<span class="dv">5</span>,  <span class="st">"Mon/Wed/Fri"</span>, <span class="st">"11:00"</span>, <span class="st">"11:50"</span>, <span class="st">"Room 305"</span>, <span class="st">"Spring 2026"</span>),</span>
<span id="cb10-99"><a></a>        ]</span>
<span id="cb10-100"><a></a>    )</span>
<span id="cb10-101"><a></a></span>
<span id="cb10-102"><a></a>    conn.commit()</span>
<span id="cb10-103"><a></a>    <span class="bu">print</span>(<span class="st">"Database created and populated successfully."</span>)</span>
<span id="cb10-104"><a></a>    <span class="bu">print</span>(<span class="ss">f"  - </span><span class="sc">{</span>cursor<span class="sc">.</span>execute(<span class="st">'SELECT COUNT(*) FROM instructors'</span>)<span class="sc">.</span>fetchone()[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> instructors"</span>)</span>
<span id="cb10-105"><a></a>    <span class="bu">print</span>(<span class="ss">f"  - </span><span class="sc">{</span>cursor<span class="sc">.</span>execute(<span class="st">'SELECT COUNT(*) FROM courses'</span>)<span class="sc">.</span>fetchone()[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> courses"</span>)</span>
<span id="cb10-106"><a></a>    <span class="bu">print</span>(<span class="ss">f"  - </span><span class="sc">{</span>cursor<span class="sc">.</span>execute(<span class="st">'SELECT COUNT(*) FROM schedules'</span>)<span class="sc">.</span>fetchone()[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> schedules"</span>)</span>
<span id="cb10-107"><a></a></span>
<span id="cb10-108"><a></a>    <span class="cf">return</span> conn</span>
<span id="cb10-109"><a></a></span>
<span id="cb10-110"><a></a>create_and_populate_db()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="sql-augmented-generation-3" class="slide level2">
<h2>SQL-Augmented Generation</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/sql-augmented.ipynb" data-notebook-title="SQL-Augmented Generation" data-notebook-cellid="build-context">
<div id="build-context" class="cell" data-execution_count="34">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a></a><span class="im">import</span> sqlite3</span>
<span id="cb11-2"><a></a><span class="im">import</span> re</span>
<span id="cb11-3"><a></a></span>
<span id="cb11-4"><a></a><span class="kw">def</span> get_course_by_code(conn, code):</span>
<span id="cb11-5"><a></a>    <span class="co">"""Return full details for a single course by its code (e.g. 'CS-394')."""</span></span>
<span id="cb11-6"><a></a>    <span class="cf">return</span> conn.execute(<span class="st">"""</span></span>
<span id="cb11-7"><a></a><span class="st">        SELECT</span></span>
<span id="cb11-8"><a></a><span class="st">            c.code,</span></span>
<span id="cb11-9"><a></a><span class="st">            c.title,</span></span>
<span id="cb11-10"><a></a><span class="st">            c.credits,</span></span>
<span id="cb11-11"><a></a><span class="st">            c.level,</span></span>
<span id="cb11-12"><a></a><span class="st">            c.description,</span></span>
<span id="cb11-13"><a></a><span class="st">            c.max_enrollment,</span></span>
<span id="cb11-14"><a></a><span class="st">            i.name AS instructor,</span></span>
<span id="cb11-15"><a></a><span class="st">            i.email AS instructor_email,</span></span>
<span id="cb11-16"><a></a><span class="st">            i.bio AS instructor_bio,</span></span>
<span id="cb11-17"><a></a><span class="st">            s.days,</span></span>
<span id="cb11-18"><a></a><span class="st">            s.time_start,</span></span>
<span id="cb11-19"><a></a><span class="st">            s.time_end,</span></span>
<span id="cb11-20"><a></a><span class="st">            s.room,</span></span>
<span id="cb11-21"><a></a><span class="st">            s.semester</span></span>
<span id="cb11-22"><a></a><span class="st">        FROM courses c</span></span>
<span id="cb11-23"><a></a><span class="st">        JOIN instructors i ON c.instructor_id = i.id</span></span>
<span id="cb11-24"><a></a><span class="st">        JOIN schedules s   ON s.course_id = c.id</span></span>
<span id="cb11-25"><a></a><span class="st">        WHERE UPPER(c.code) = UPPER(?)</span></span>
<span id="cb11-26"><a></a><span class="st">    """</span>, (code,)).fetchone()</span>
<span id="cb11-27"><a></a></span>
<span id="cb11-28"><a></a></span>
<span id="cb11-29"><a></a></span>
<span id="cb11-30"><a></a><span class="kw">def</span> rows_to_text(rows):</span>
<span id="cb11-31"><a></a>    <span class="co">"""Convert sqlite3.Row results into a readable string block."""</span></span>
<span id="cb11-32"><a></a>    <span class="cf">if</span> <span class="kw">not</span> rows:</span>
<span id="cb11-33"><a></a>        <span class="cf">return</span> <span class="st">"No results found."</span></span>
<span id="cb11-34"><a></a>    <span class="cf">if</span> <span class="bu">isinstance</span>(rows, sqlite3.Row):</span>
<span id="cb11-35"><a></a>        rows <span class="op">=</span> [rows]</span>
<span id="cb11-36"><a></a>    <span class="cf">return</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>.join(</span>
<span id="cb11-37"><a></a>        <span class="st">"  "</span> <span class="op">+</span> <span class="st">", "</span>.join(<span class="ss">f"</span><span class="sc">{</span>k<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>row[k]<span class="sc">}</span><span class="ss">"</span> <span class="cf">for</span> k <span class="kw">in</span> row.keys())</span>
<span id="cb11-38"><a></a>        <span class="cf">for</span> row <span class="kw">in</span> rows</span>
<span id="cb11-39"><a></a>    )</span>
<span id="cb11-40"><a></a></span>
<span id="cb11-41"><a></a></span>
<span id="cb11-42"><a></a><span class="kw">def</span> build_context(conn, user_query):</span>
<span id="cb11-43"><a></a>    <span class="co">"""</span></span>
<span id="cb11-44"><a></a><span class="co">    Extract a course code from the user query and retrieve its details.</span></span>
<span id="cb11-45"><a></a><span class="co">    Returns a formatted string ready to inject into the system prompt.</span></span>
<span id="cb11-46"><a></a><span class="co">    """</span></span>
<span id="cb11-47"><a></a>    code_match <span class="op">=</span> re.search(<span class="vs">r'</span><span class="dv">\b</span><span class="kw">(</span><span class="pp">[A-Z]</span><span class="op">{2,4}</span><span class="vs">-</span><span class="dv">\d</span><span class="op">{3}</span><span class="kw">)</span><span class="dv">\b</span><span class="vs">'</span>, user_query.upper())</span>
<span id="cb11-48"><a></a></span>
<span id="cb11-49"><a></a>    <span class="cf">if</span> <span class="kw">not</span> code_match:</span>
<span id="cb11-50"><a></a>        <span class="cf">return</span> <span class="st">"No course code found in query. Please include a course code (e.g. CS-394)."</span></span>
<span id="cb11-51"><a></a></span>
<span id="cb11-52"><a></a>    code <span class="op">=</span> code_match.group(<span class="dv">1</span>)</span>
<span id="cb11-53"><a></a>    course <span class="op">=</span> get_course_by_code(conn, code)</span>
<span id="cb11-54"><a></a></span>
<span id="cb11-55"><a></a>    <span class="cf">if</span> <span class="kw">not</span> course:</span>
<span id="cb11-56"><a></a>        <span class="cf">return</span> <span class="ss">f"No course found with code </span><span class="sc">{</span>code<span class="sc">}</span><span class="ss">."</span></span>
<span id="cb11-57"><a></a></span>
<span id="cb11-58"><a></a>    <span class="cf">return</span> (</span>
<span id="cb11-59"><a></a>        <span class="ss">f"Course details for </span><span class="sc">{</span>code<span class="sc">}</span><span class="ss">:</span><span class="ch">\n</span><span class="sc">{</span>rows_to_text(course)<span class="sc">}</span><span class="ch">\n\n</span><span class="ss">"</span></span>
<span id="cb11-60"><a></a>    )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="sql-augmented-generation-4" class="slide level2">
<h2>SQL-Augmented Generation</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/sql-augmented.ipynb" data-notebook-title="SQL-Augmented Generation" data-notebook-cellid="call-with">
<div id="call-with" class="cell" data-execution_count="39">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a></a><span class="co"># Connect to the sqlite database</span></span>
<span id="cb12-2"><a></a>conn <span class="op">=</span> create_and_populate_db()</span>
<span id="cb12-3"><a></a></span>
<span id="cb12-4"><a></a><span class="co"># Query the database based on the user prompt</span></span>
<span id="cb12-5"><a></a>context <span class="op">=</span> build_context(conn, USER_PROMPT)</span>
<span id="cb12-6"><a></a></span>
<span id="cb12-7"><a></a><span class="co"># Create system prompt</span></span>
<span id="cb12-8"><a></a>SYSTEM_PROMPT <span class="op">=</span> <span class="ss">f"""</span></span>
<span id="cb12-9"><a></a><span class="ss">You help students lookup course information. Here are the course details:</span></span>
<span id="cb12-10"><a></a></span>
<span id="cb12-11"><a></a><span class="ss">---COURSE INFORMATION---</span></span>
<span id="cb12-12"><a></a><span class="sc">{</span>context<span class="sc">}</span></span>
<span id="cb12-13"><a></a><span class="ss">---END COURSE INFORMATION---</span></span>
<span id="cb12-14"><a></a><span class="ss">"""</span></span>
<span id="cb12-15"><a></a></span>
<span id="cb12-16"><a></a><span class="co"># Query the model</span></span>
<span id="cb12-17"><a></a>response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb12-18"><a></a>    model<span class="op">=</span>MODEL,</span>
<span id="cb12-19"><a></a>    messages<span class="op">=</span>[</span>
<span id="cb12-20"><a></a>        {<span class="st">"role"</span>: <span class="st">"system"</span>, <span class="st">"content"</span>: SYSTEM_PROMPT},</span>
<span id="cb12-21"><a></a>        {<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: USER_PROMPT},</span>
<span id="cb12-22"><a></a>    ],</span>
<span id="cb12-23"><a></a>)</span>
<span id="cb12-24"><a></a>response.choices[<span class="dv">0</span>].message.content</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="sql-augmented-generation-5" class="slide level2">
<h2>SQL-Augmented Generation</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/sql-augmented.ipynb" data-notebook-title="SQL-Augmented Generation" data-notebook-cellid="call-with">
<div id="call-with" class="cell" data-execution_count="39">
<div class="cell-output cell-output-stdout">
<pre><code>Found existing database at '.data/course_catalog.db'. Skipping creation.</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>'The instructor for CS-394 "How Generative AI Works" is **Dr. Sarah Chen**.\n'</code></pre>
</div>
</div>
</div>
</section>
<section id="sql-augmented-generation-6" class="slide level2">
<h2>SQL-Augmented Generation</h2>
<ul>
<li class="fragment">Good results, but…
<ul>
<li class="fragment">Requires the course code to be in the user prompt, matched to a RegEx pattern</li>
<li class="fragment">Will answer “Who teaches CS-394?” and “When is CS-394 held?”</li>
<li class="fragment">Won’t answer broader queries:
<ul>
<li class="fragment">“What courses teach generative AI?”</li>
<li class="fragment">“Which courses are on Friday afternoons?”</li>
</ul></li>
<li class="fragment">Could make a free-text search through the database…</li>
<li class="fragment">But there’s a better way…</li>
</ul></li>
</ul>
</section>
<section id="rag-retrieval-augmented-generation" class="slide level2">
<h2>RAG: Retrieval-Augmented Generation</h2>
<ul>
<li class="fragment">Roots of RAG trace back to 1950s and 60s, when researchers were working with vector space models</li>
<li class="fragment">Term was coined in 2020 in “Retrieval-Augmented Generation for Knowledge-Intensive NLP Tasks” by Patrick Lewis et. al (https://arxiv.org/pdf/2005.11401)</li>
<li class="fragment">“We definitely would have put more thought into the name had we known our work would become so widespread”</li>
</ul>
</section>
<section id="how-rag-works" class="slide level2">
<h2>How RAG Works</h2>
<ul>
<li class="fragment">Create “documents”
<ul>
<li class="fragment">Strings of text - can be from existing db queries or scraped from PDFs</li>
<li class="fragment">Generate embeddings (using a Sentence Transformer)</li>
<li class="fragment">Store embeddings in a database</li>
</ul></li>
<li class="fragment">User prompt is converted into an embedding</li>
<li class="fragment">Find the closest set of embeddings that match and inject into the system prompt</li>
</ul>
</section>
<section id="sidebar-sentence-transformers" class="slide level2">
<h2>Sidebar: Sentence Transformers</h2>
<ul>
<li class="fragment">In Module 1, we covered Word2Vec
<ul>
<li class="fragment">Creating embeddings from words</li>
</ul></li>
<li class="fragment">A sentence transformer creates embeddings from sentences</li>
<li class="fragment">Many models available (e.g., all-MiniLM-L6-v2, a 384-dim vector space)</li>
</ul>
</section>
<section id="how-rag-works-1" class="slide level2">
<h2>How RAG Works</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/rag.ipynb" data-notebook-title="RAG (Retrieval Augmented Generation)" data-notebook-cellid="create-db">
<div id="create-db" class="cell" data-execution_count="11">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a></a><span class="im">import</span> os</span>
<span id="cb15-2"><a></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb15-3"><a></a></span>
<span id="cb15-4"><a></a><span class="kw">def</span> create_connection(db_path<span class="op">=</span>DB_PATH):</span>
<span id="cb15-5"><a></a>    conn <span class="op">=</span> sqlite3.<span class="ex">connect</span>(db_path)</span>
<span id="cb15-6"><a></a>    conn.row_factory <span class="op">=</span> sqlite3.Row</span>
<span id="cb15-7"><a></a>    conn.enable_load_extension(<span class="va">True</span>)</span>
<span id="cb15-8"><a></a>    sqlite_vec.load(conn)</span>
<span id="cb15-9"><a></a>    conn.enable_load_extension(<span class="va">False</span>)</span>
<span id="cb15-10"><a></a>    <span class="cf">return</span> conn</span>
<span id="cb15-11"><a></a></span>
<span id="cb15-12"><a></a><span class="kw">def</span> create_and_populate_db(db_path<span class="op">=</span>DB_PATH):</span>
<span id="cb15-13"><a></a>    db_exists <span class="op">=</span> os.path.exists(db_path)</span>
<span id="cb15-14"><a></a></span>
<span id="cb15-15"><a></a>    conn <span class="op">=</span> create_connection(db_path)</span>
<span id="cb15-16"><a></a>    cursor <span class="op">=</span> conn.cursor()</span>
<span id="cb15-17"><a></a></span>
<span id="cb15-18"><a></a>    <span class="cf">if</span> db_exists:</span>
<span id="cb15-19"><a></a>        <span class="bu">print</span>(<span class="ss">f"Found existing database at '</span><span class="sc">{</span>db_path<span class="sc">}</span><span class="ss">'. Skipping creation."</span>)</span>
<span id="cb15-20"><a></a>        <span class="cf">return</span> conn</span>
<span id="cb15-21"><a></a></span>
<span id="cb15-22"><a></a>    <span class="bu">print</span>(<span class="ss">f"Creating new database at '</span><span class="sc">{</span>db_path<span class="sc">}</span><span class="ss">'..."</span>)</span>
<span id="cb15-23"><a></a></span>
<span id="cb15-24"><a></a>    <span class="co"># --- Schema ---</span></span>
<span id="cb15-25"><a></a>    cursor.executescript(<span class="st">"""</span></span>
<span id="cb15-26"><a></a><span class="st">        CREATE TABLE instructors (</span></span>
<span id="cb15-27"><a></a><span class="st">            id          INTEGER PRIMARY KEY,</span></span>
<span id="cb15-28"><a></a><span class="st">            name        TEXT NOT NULL,</span></span>
<span id="cb15-29"><a></a><span class="st">            email       TEXT,</span></span>
<span id="cb15-30"><a></a><span class="st">            department  TEXT,</span></span>
<span id="cb15-31"><a></a><span class="st">            bio         TEXT</span></span>
<span id="cb15-32"><a></a><span class="st">        );</span></span>
<span id="cb15-33"><a></a></span>
<span id="cb15-34"><a></a><span class="st">        CREATE TABLE courses (</span></span>
<span id="cb15-35"><a></a><span class="st">            id              INTEGER PRIMARY KEY,</span></span>
<span id="cb15-36"><a></a><span class="st">            code            TEXT NOT NULL UNIQUE,</span></span>
<span id="cb15-37"><a></a><span class="st">            title           TEXT NOT NULL,</span></span>
<span id="cb15-38"><a></a><span class="st">            description     TEXT,</span></span>
<span id="cb15-39"><a></a><span class="st">            credits         INTEGER,</span></span>
<span id="cb15-40"><a></a><span class="st">            level           TEXT CHECK(level IN ('intro', 'intermediate', 'advanced')),</span></span>
<span id="cb15-41"><a></a><span class="st">            instructor_id   INTEGER REFERENCES instructors(id),</span></span>
<span id="cb15-42"><a></a><span class="st">            max_enrollment  INTEGER</span></span>
<span id="cb15-43"><a></a><span class="st">        );</span></span>
<span id="cb15-44"><a></a></span>
<span id="cb15-45"><a></a><span class="st">        CREATE TABLE schedules (</span></span>
<span id="cb15-46"><a></a><span class="st">            id          INTEGER PRIMARY KEY,</span></span>
<span id="cb15-47"><a></a><span class="st">            course_id   INTEGER REFERENCES courses(id),</span></span>
<span id="cb15-48"><a></a><span class="st">            days        TEXT,</span></span>
<span id="cb15-49"><a></a><span class="st">            time_start  TEXT,</span></span>
<span id="cb15-50"><a></a><span class="st">            time_end    TEXT,</span></span>
<span id="cb15-51"><a></a><span class="st">            room        TEXT,</span></span>
<span id="cb15-52"><a></a><span class="st">            semester    TEXT</span></span>
<span id="cb15-53"><a></a><span class="st">        );</span></span>
<span id="cb15-54"><a></a></span>
<span id="cb15-55"><a></a><span class="st">        CREATE VIRTUAL TABLE course_embeddings USING vec0(</span></span>
<span id="cb15-56"><a></a><span class="st">            course_id INTEGER PRIMARY KEY,</span></span>
<span id="cb15-57"><a></a><span class="st">            embedding FLOAT[384]</span></span>
<span id="cb15-58"><a></a><span class="st">        );</span></span>
<span id="cb15-59"><a></a><span class="st">    """</span>)</span>
<span id="cb15-60"><a></a></span>
<span id="cb15-61"><a></a>    <span class="co"># --- Instructors ---</span></span>
<span id="cb15-62"><a></a>    cursor.executemany(</span>
<span id="cb15-63"><a></a>        <span class="st">"INSERT INTO instructors (name, email, department, bio) VALUES (?, ?, ?, ?)"</span>,</span>
<span id="cb15-64"><a></a>        [</span>
<span id="cb15-65"><a></a>            (<span class="st">"Dr. Sarah Chen"</span>, <span class="st">"s.chen@university.edu"</span>, <span class="st">"Computer Science"</span>,</span>
<span id="cb15-66"><a></a>             <span class="st">"Specializes in machine learning and NLP. Author of 'Practical Deep Learning'."</span>),</span>
<span id="cb15-67"><a></a>            (<span class="st">"Prof. Marcus Webb"</span>, <span class="st">"m.webb@university.edu"</span>, <span class="st">"Computer Science"</span>,</span>
<span id="cb15-68"><a></a>             <span class="st">"Focuses on systems programming and computer architecture."</span>),</span>
<span id="cb15-69"><a></a>            (<span class="st">"Dr. Priya Nair"</span>, <span class="st">"p.nair@university.edu"</span>, <span class="st">"Data Science"</span>,</span>
<span id="cb15-70"><a></a>             <span class="st">"Expert in statistical learning, data visualization, and reproducible research."</span>),</span>
<span id="cb15-71"><a></a>            (<span class="st">"Prof. James Okafor"</span>, <span class="st">"j.okafor@university.edu"</span>, <span class="st">"Computer Science"</span>,</span>
<span id="cb15-72"><a></a>             <span class="st">"Teaches software engineering and has 10 years of industry experience at major tech firms."</span>),</span>
<span id="cb15-73"><a></a>            (<span class="st">"Dr. Elena Russo"</span>, <span class="st">"e.russo@university.edu"</span>, <span class="st">"Mathematics"</span>,</span>
<span id="cb15-74"><a></a>             <span class="st">"Research interests include linear algebra, optimization, and mathematical foundations of AI."</span>),</span>
<span id="cb15-75"><a></a>        ]</span>
<span id="cb15-76"><a></a>    )</span>
<span id="cb15-77"><a></a></span>
<span id="cb15-78"><a></a>    <span class="co"># --- Courses ---</span></span>
<span id="cb15-79"><a></a>    cursor.executemany(</span>
<span id="cb15-80"><a></a>        <span class="st">"""INSERT INTO courses (code, title, description, credits, level, instructor_id, max_enrollment)</span></span>
<span id="cb15-81"><a></a><span class="st">           VALUES (?, ?, ?, ?, ?, ?, ?)"""</span>,</span>
<span id="cb15-82"><a></a>        [</span>
<span id="cb15-83"><a></a>            (<span class="st">"CS-101"</span>, <span class="st">"Introduction to Programming"</span>,</span>
<span id="cb15-84"><a></a>             <span class="st">"Fundamentals of programming using Python. Covers variables, control flow, functions, and basic data structures."</span>,</span>
<span id="cb15-85"><a></a>             <span class="dv">3</span>, <span class="st">"intro"</span>, <span class="dv">2</span>, <span class="dv">40</span>),</span>
<span id="cb15-86"><a></a>            (<span class="st">"CS-201"</span>, <span class="st">"Data Structures and Algorithms"</span>,</span>
<span id="cb15-87"><a></a>             <span class="st">"Core data structures including linked lists, trees, graphs, and hash tables. Algorithm design and complexity analysis."</span>,</span>
<span id="cb15-88"><a></a>             <span class="dv">3</span>, <span class="st">"intermediate"</span>, <span class="dv">2</span>, <span class="dv">35</span>),</span>
<span id="cb15-89"><a></a>            (<span class="st">"CS-301"</span>, <span class="st">"Machine Learning Fundamentals"</span>,</span>
<span id="cb15-90"><a></a>             <span class="st">"Supervised and unsupervised learning, model evaluation, feature engineering, and scikit-learn. Final project required."</span>,</span>
<span id="cb15-91"><a></a>             <span class="dv">4</span>, <span class="st">"intermediate"</span>, <span class="dv">1</span>, <span class="dv">30</span>),</span>
<span id="cb15-92"><a></a>            (<span class="st">"CS-394"</span>, <span class="st">"How Generative AI Works"</span>,</span>
<span id="cb15-93"><a></a>             <span class="st">"Transformer architectures, large language models, prompt engineering, fine-tuning, and deployment. Hands-on with open-source models."</span>,</span>
<span id="cb15-94"><a></a>             <span class="dv">3</span>, <span class="st">"advanced"</span>, <span class="dv">1</span>, <span class="dv">25</span>),</span>
<span id="cb15-95"><a></a>            (<span class="st">"CS-310"</span>, <span class="st">"Database Systems"</span>,</span>
<span id="cb15-96"><a></a>             <span class="st">"Relational database design, SQL, transactions, indexing, and an introduction to NoSQL systems."</span>,</span>
<span id="cb15-97"><a></a>             <span class="dv">3</span>, <span class="st">"intermediate"</span>, <span class="dv">4</span>, <span class="dv">20</span>),</span>
<span id="cb15-98"><a></a>        ]</span>
<span id="cb15-99"><a></a>    )</span>
<span id="cb15-100"><a></a></span>
<span id="cb15-101"><a></a>    <span class="co"># --- Schedules ---</span></span>
<span id="cb15-102"><a></a>    cursor.executemany(</span>
<span id="cb15-103"><a></a>        <span class="st">"""INSERT INTO schedules (course_id, days, time_start, time_end, room, semester)</span></span>
<span id="cb15-104"><a></a><span class="st">           VALUES (?, ?, ?, ?, ?, ?)"""</span>,</span>
<span id="cb15-105"><a></a>        [</span>
<span id="cb15-106"><a></a>            (<span class="dv">1</span>, <span class="st">"Mon/Wed/Fri"</span>, <span class="st">"09:00"</span>, <span class="st">"09:50"</span>, <span class="st">"Room 101"</span>, <span class="st">"Spring 2026"</span>),</span>
<span id="cb15-107"><a></a>            (<span class="dv">2</span>, <span class="st">"Tue/Thu"</span>,     <span class="st">"10:00"</span>, <span class="st">"11:20"</span>, <span class="st">"Room 204"</span>, <span class="st">"Spring 2026"</span>),</span>
<span id="cb15-108"><a></a>            (<span class="dv">3</span>, <span class="st">"Mon/Wed"</span>,     <span class="st">"13:00"</span>, <span class="st">"14:20"</span>, <span class="st">"Lab 12"</span>,   <span class="st">"Spring 2026"</span>),</span>
<span id="cb15-109"><a></a>            (<span class="dv">4</span>, <span class="st">"Tue/Thu"</span>,     <span class="st">"14:00"</span>, <span class="st">"15:20"</span>, <span class="st">"Lab 12"</span>,   <span class="st">"Spring 2026"</span>),</span>
<span id="cb15-110"><a></a>            (<span class="dv">5</span>, <span class="st">"Mon/Wed/Fri"</span>, <span class="st">"11:00"</span>, <span class="st">"11:50"</span>, <span class="st">"Room 305"</span>, <span class="st">"Spring 2026"</span>),</span>
<span id="cb15-111"><a></a>        ]</span>
<span id="cb15-112"><a></a>    )</span>
<span id="cb15-113"><a></a></span>
<span id="cb15-114"><a></a>    conn.commit()</span>
<span id="cb15-115"><a></a></span>
<span id="cb15-116"><a></a>    <span class="co"># --- Embeddings ---</span></span>
<span id="cb15-117"><a></a>    <span class="co"># Embed each course as "title: description" so the vector captures both</span></span>
<span id="cb15-118"><a></a>    <span class="bu">print</span>(<span class="st">"Generating embeddings..."</span>)</span>
<span id="cb15-119"><a></a>    courses <span class="op">=</span> conn.execute(<span class="st">"SELECT id, title, description FROM courses"</span>).fetchall()</span>
<span id="cb15-120"><a></a>    <span class="cf">for</span> course <span class="kw">in</span> courses:</span>
<span id="cb15-121"><a></a>        text <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>course[<span class="st">'title'</span>]<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>course[<span class="st">'description'</span>]<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb15-122"><a></a>        embedding <span class="op">=</span> embedder.encode(text).astype(np.float32)</span>
<span id="cb15-123"><a></a>        cursor.execute(</span>
<span id="cb15-124"><a></a>            <span class="st">"INSERT INTO course_embeddings (course_id, embedding) VALUES (?, ?)"</span>,</span>
<span id="cb15-125"><a></a>            (course[<span class="st">'id'</span>], embedding.tobytes())</span>
<span id="cb15-126"><a></a>        )</span>
<span id="cb15-127"><a></a></span>
<span id="cb15-128"><a></a>    conn.commit()</span>
<span id="cb15-129"><a></a>    <span class="bu">print</span>(<span class="st">"Database created and populated successfully."</span>)</span>
<span id="cb15-130"><a></a>    <span class="bu">print</span>(<span class="ss">f"  - </span><span class="sc">{</span>cursor<span class="sc">.</span>execute(<span class="st">'SELECT COUNT(*) FROM instructors'</span>)<span class="sc">.</span>fetchone()[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> instructors"</span>)</span>
<span id="cb15-131"><a></a>    <span class="bu">print</span>(<span class="ss">f"  - </span><span class="sc">{</span>cursor<span class="sc">.</span>execute(<span class="st">'SELECT COUNT(*) FROM courses'</span>)<span class="sc">.</span>fetchone()[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> courses"</span>)</span>
<span id="cb15-132"><a></a>    <span class="bu">print</span>(<span class="ss">f"  - </span><span class="sc">{</span>cursor<span class="sc">.</span>execute(<span class="st">'SELECT COUNT(*) FROM schedules'</span>)<span class="sc">.</span>fetchone()[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> schedules"</span>)</span>
<span id="cb15-133"><a></a>    <span class="bu">print</span>(<span class="ss">f"  - </span><span class="sc">{</span>cursor<span class="sc">.</span>execute(<span class="st">'SELECT COUNT(*) FROM course_embeddings'</span>)<span class="sc">.</span>fetchone()[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> embeddings"</span>)</span>
<span id="cb15-134"><a></a></span>
<span id="cb15-135"><a></a>    <span class="cf">return</span> conn</span>
<span id="cb15-136"><a></a></span>
<span id="cb15-137"><a></a>conn <span class="op">=</span> create_and_populate_db()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="how-rag-works-2" class="slide level2">
<h2>How RAG Works</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/rag.ipynb" data-notebook-title="RAG (Retrieval Augmented Generation)" data-notebook-cellid="build-context">
<div id="build-context" class="cell" data-execution_count="16">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a></a><span class="kw">def</span> search_courses(conn, user_query, top_k<span class="op">=</span><span class="dv">3</span>):</span>
<span id="cb16-2"><a></a>    <span class="co">"""</span></span>
<span id="cb16-3"><a></a><span class="co">    Embed the user query and find the most semantically similar courses.</span></span>
<span id="cb16-4"><a></a><span class="co">    Returns the top_k closest courses with full details.</span></span>
<span id="cb16-5"><a></a><span class="co">    """</span></span>
<span id="cb16-6"><a></a>    query_embedding <span class="op">=</span> embedder.encode(user_query).astype(np.float32)</span>
<span id="cb16-7"><a></a></span>
<span id="cb16-8"><a></a>    <span class="cf">return</span> conn.execute(<span class="st">"""</span></span>
<span id="cb16-9"><a></a><span class="st">        SELECT</span></span>
<span id="cb16-10"><a></a><span class="st">            c.code,</span></span>
<span id="cb16-11"><a></a><span class="st">            c.title,</span></span>
<span id="cb16-12"><a></a><span class="st">            c.description,</span></span>
<span id="cb16-13"><a></a><span class="st">            c.credits,</span></span>
<span id="cb16-14"><a></a><span class="st">            c.level,</span></span>
<span id="cb16-15"><a></a><span class="st">            c.max_enrollment,</span></span>
<span id="cb16-16"><a></a><span class="st">            i.name AS instructor,</span></span>
<span id="cb16-17"><a></a><span class="st">            i.email AS instructor_email,</span></span>
<span id="cb16-18"><a></a><span class="st">            s.days,</span></span>
<span id="cb16-19"><a></a><span class="st">            s.time_start,</span></span>
<span id="cb16-20"><a></a><span class="st">            s.time_end,</span></span>
<span id="cb16-21"><a></a><span class="st">            s.room,</span></span>
<span id="cb16-22"><a></a><span class="st">            s.semester,</span></span>
<span id="cb16-23"><a></a><span class="st">            e.distance</span></span>
<span id="cb16-24"><a></a><span class="st">        FROM course_embeddings e</span></span>
<span id="cb16-25"><a></a><span class="st">        JOIN courses c    ON e.course_id = c.id</span></span>
<span id="cb16-26"><a></a><span class="st">        JOIN instructors i ON c.instructor_id = i.id</span></span>
<span id="cb16-27"><a></a><span class="st">        JOIN schedules s   ON s.course_id = c.id</span></span>
<span id="cb16-28"><a></a><span class="st">        WHERE e.embedding MATCH ?</span></span>
<span id="cb16-29"><a></a><span class="st">          AND k = ?</span></span>
<span id="cb16-30"><a></a><span class="st">        ORDER BY e.distance</span></span>
<span id="cb16-31"><a></a><span class="st">    """</span>, (query_embedding.tobytes(), top_k)).fetchall()</span>
<span id="cb16-32"><a></a></span>
<span id="cb16-33"><a></a></span>
<span id="cb16-34"><a></a><span class="kw">def</span> rows_to_text(rows):</span>
<span id="cb16-35"><a></a>    <span class="cf">if</span> <span class="kw">not</span> rows:</span>
<span id="cb16-36"><a></a>        <span class="cf">return</span> <span class="st">"No results found."</span></span>
<span id="cb16-37"><a></a>    <span class="cf">if</span> <span class="bu">isinstance</span>(rows, sqlite3.Row):</span>
<span id="cb16-38"><a></a>        rows <span class="op">=</span> [rows]</span>
<span id="cb16-39"><a></a>    <span class="cf">return</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>.join(</span>
<span id="cb16-40"><a></a>        <span class="st">"  "</span> <span class="op">+</span> <span class="st">", "</span>.join(<span class="ss">f"</span><span class="sc">{</span>k<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>row[k]<span class="sc">}</span><span class="ss">"</span> <span class="cf">for</span> k <span class="kw">in</span> row.keys())</span>
<span id="cb16-41"><a></a>        <span class="cf">for</span> row <span class="kw">in</span> rows</span>
<span id="cb16-42"><a></a>    )</span>
<span id="cb16-43"><a></a></span>
<span id="cb16-44"><a></a></span>
<span id="cb16-45"><a></a><span class="kw">def</span> build_context(conn, user_query):</span>
<span id="cb16-46"><a></a>    rows <span class="op">=</span> search_courses(conn, user_query)</span>
<span id="cb16-47"><a></a>    <span class="cf">return</span> <span class="ss">f"Most relevant courses for the query:</span><span class="ch">\n</span><span class="sc">{</span>rows_to_text(rows)<span class="sc">}</span><span class="ss">"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="how-rag-works-3" class="slide level2">
<h2>How RAG Works</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/rag.ipynb" data-notebook-title="RAG (Retrieval Augmented Generation)" data-notebook-cellid="call-with">
<div id="call-with" class="cell" data-execution_count="17">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a></a><span class="co"># Connect to the sqlite database</span></span>
<span id="cb17-2"><a></a>conn <span class="op">=</span> create_and_populate_db()</span>
<span id="cb17-3"><a></a></span>
<span id="cb17-4"><a></a><span class="co"># Query the database based on the user prompt</span></span>
<span id="cb17-5"><a></a>context <span class="op">=</span> build_context(conn, USER_PROMPT)</span>
<span id="cb17-6"><a></a></span>
<span id="cb17-7"><a></a><span class="co"># Create system prompt</span></span>
<span id="cb17-8"><a></a>SYSTEM_PROMPT <span class="op">=</span> <span class="ss">f"""</span></span>
<span id="cb17-9"><a></a><span class="ss">You help students lookup course information. Here are the course details:</span></span>
<span id="cb17-10"><a></a></span>
<span id="cb17-11"><a></a><span class="ss">---COURSE INFORMATION---</span></span>
<span id="cb17-12"><a></a><span class="sc">{</span>context<span class="sc">}</span></span>
<span id="cb17-13"><a></a><span class="ss">---END COURSE INFORMATION---</span></span>
<span id="cb17-14"><a></a><span class="ss">"""</span></span>
<span id="cb17-15"><a></a></span>
<span id="cb17-16"><a></a><span class="co"># Query the model</span></span>
<span id="cb17-17"><a></a>response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb17-18"><a></a>    model<span class="op">=</span>MODEL,</span>
<span id="cb17-19"><a></a>    messages<span class="op">=</span>[</span>
<span id="cb17-20"><a></a>        {<span class="st">"role"</span>: <span class="st">"system"</span>, <span class="st">"content"</span>: SYSTEM_PROMPT},</span>
<span id="cb17-21"><a></a>        {<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: USER_PROMPT},</span>
<span id="cb17-22"><a></a>    ],</span>
<span id="cb17-23"><a></a>)</span>
<span id="cb17-24"><a></a>response.choices[<span class="dv">0</span>].message.content</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="how-rag-works-4" class="slide level2">
<h2>How RAG Works</h2>
<ul>
<li class="fragment">“Which courses teach about generative AI?”</li>
</ul>
</section>
<section id="how-rag-works-5" class="slide level2">
<h2>How RAG Works</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/rag.ipynb" data-notebook-title="RAG (Retrieval Augmented Generation)" data-notebook-cellid="call-with">
<div id="call-with" class="cell" data-execution_count="17">
<div class="cell-output cell-output-stdout">
<pre><code>Found existing database at '.data/course_catalog_rag.db'. Skipping creation.</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>'The course that specifically teaches about generative AI is:\n\n**CS-394: How Generative AI Works**  \n- **Description**: Covers transformer architectures, large language models, prompt engineering, fine-tuning, and deployment. Includes hands-on work with open-source models.  \n- **Details**:  \n  - Credits: 3 | Level: Advanced  \n  - Instructor: Dr. Sarah Chen | [Contact](mailto:s.chen@university.edu)  \n  - Time: Tue/Thu 14:00–15:20 | Room: Lab 12  \n  - Semester: Spring 2026  \n\nThis course directly addresses generative AI concepts and techniques.\n'</code></pre>
</div>
</div>
</div>
</section>
<section id="how-rag-works-6" class="slide level2">
<h2>How RAG Works</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><a href="diagrams/rag.svg" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img data-src="diagrams/rag.svg" class="quarto-figure quarto-figure-center" width="600"></a></p>
</figure>
</div>
</section></section>
<section>
<section id="hands-on" class="title-slide slide level1 center">
<h1>Hands-on</h1>
<p>Investigate sql-augmented.ipynb and rag.ipynb</p>
<p>Try different queries. Which work well on both?</p>
<p>Recreate the database with different data.</p>
</section>
<section id="rag-databases" class="slide level2">
<h2>RAG Databases</h2>
<ul>
<li class="fragment">Extensions
<ul>
<li class="fragment">sqlite-vec: SQLite Extension (we’ve been using that!)</li>
<li class="fragment">pgvector: PostgreSQL extension</li>
</ul></li>
<li class="fragment">Libraries
<ul>
<li class="fragment">FAISS (Meta): In-memory vector index vs.&nbsp;database. Very fast.</li>
</ul></li>
</ul>
</section>
<section id="rag-databases-1" class="slide level2">
<h2>RAG Databases</h2>
<ul>
<li class="fragment">Pinecone: Popular commercial managed/cloud option.</li>
<li class="fragment">Qdrant: Open-source dedicated db, written in Rust.</li>
<li class="fragment">Milvus: Open-source. Heavier to operate, but can exceed a billion embeddings.</li>
</ul>
</section>
<section id="beyond-rag" class="slide level2">
<h2>Beyond RAG</h2>
<ul>
<li class="fragment">While system prompting and RAG go so far, there are cases where you want the model to do something beyond</li>
<li class="fragment">Examples</li>
<li class="fragment">Fine-Tuning</li>
</ul>
</section></section>
<section>
<section id="evaluating-models" class="title-slide slide level1 center">
<h1>Evaluating Models</h1>

</section>
<section id="evaluating-models-1" class="slide level2">
<h2>Evaluating Models</h2>
<ul>
<li class="fragment">TBD</li>
<li class="fragment">Before we look at improving accuracy of models, should understand how models are evaluated</li>
<li class="fragment">How evaluations work, especially on non-multiple choice questions</li>
</ul>
</section>
<section id="mmlu-pro-massive-multitask-language-understanding" class="slide level2">
<h2>MMLU-Pro (Massive Multitask Language Understanding)</h2>
<p><a href="https://huggingface.co/datasets/TIGER-Lab/MMLU-Pro" class="external" target="_blank">https://huggingface.co/datasets/TIGER-Lab/MMLU-Pro</a></p>
<ul>
<li class="fragment"><strong>What it tests:</strong> 12K questions across 14 subject areas that cover STEM, humanities, social sciences, and professional domains.
<ul>
<li class="fragment">Multiple-choice questions (10 options) testing both factual knowledge and reasoning across elementary to professional levels.</li>
</ul></li>
<li class="fragment"><strong>History:</strong> Original MMLU published in 2021 by Dan Hendrycks et al.&nbsp;
<ul>
<li class="fragment">MMLU-Pro created because models were plateauing on MMLU (hitting 85-90%+)</li>
<li class="fragment">Pro released in June 2024 by the TIGER-AI-Lab team and accepted at NeurIPS 2024</li>
</ul></li>
</ul>
</section>
<section id="gpqa-graduate-level-google-proof-qa" class="slide level2">
<h2>GPQA (Graduate-Level Google-Proof Q&amp;A)</h2>
<p><a href="https://huggingface.co/datasets/Idavidrein/gpqa" class="external" target="_blank">https://huggingface.co/datasets/Idavidrein/gpqa</a></p>
<ul>
<li class="fragment"><strong>What it tests:</strong> Graduate/PhD-level scientific reasoning in biology, physics, and chemistry through multiple-choice questions
<ul>
<li class="fragment">Require deep domain understanding, not just fact recall</li>
<li class="fragment">Cannot be solved by web search (the “Google-proof” property)</li>
<li class="fragment">Test genuine conceptual reasoning and problem-solving</li>
</ul></li>
<li class="fragment"><strong>History:</strong>
<ul>
<li class="fragment">Created Nov 2023 by David Rein et al.&nbsp;(includes researchers from NYU, Anthropic, and other institutions)</li>
</ul></li>
</ul>
</section>
<section id="swe-bench" class="slide level2">
<h2>SWE-Bench</h2>
<p><a href="https://www.swebench.com/" class="external" target="_blank">https://www.swebench.com/</a></p>
<ul>
<li class="fragment"><strong>What it tests:</strong> AI systems’ ability to solve real-world software engineering tasks by resolving actual GitHub issues from popular open-source Python repositories</li>
<li class="fragment"><strong>History:</strong> Created: 2023 by Princeton NLP group (Carlos E. Jimenez et al.)
<ul>
<li class="fragment">Original dataset was 2,294 GitHub issues from 12 popular Python repositories (Django, scikit-learn, Flask, Matplotlib, Requests, SymPy, pytest, Sphinx, etc.)</li>
<li class="fragment">Three major variants: Lite, Verified, and Pro</li>
<li class="fragment">Microsoft also publishes a “Live” version with monthly curated updates</li>
</ul></li>
</ul>
</section>
<section id="hle-humanitys-last-exam" class="slide level2">
<h2>HLE (Humanity’s Last Exam)</h2>
<p><a href="https://huggingface.co/datasets/cais/hle" class="external" target="_blank">https://huggingface.co/datasets/cais/hle</a></p>
<ul>
<li class="fragment"><strong>What it tests:</strong> 2,500 expert-level questions across dozens of subjects, including mathematics, humanities, and the natural sciences.
<ul>
<li class="fragment">HLE is developed globally by subject-matter experts and consists of multiple-choice and short-answer questions suitable for automated grading.</li>
<li class="fragment">Require multimodal, multi-step reasoning rather than pattern matching or recall</li>
<li class="fragment">Be “Google-proof” (can’t be quickly answered by web search)</li>
</ul></li>
<li class="fragment"><strong>History:</strong> Created in late 2024 by the Center for AI Safety (CAIS) and Scale AI
<ul>
<li class="fragment">Led by: Dan Hendrycks (who also created MMLU and MATH benchmarks)</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="demo-of-benchmarks" class="title-slide slide level1 center">
<h1>Demo of Benchmarks</h1>

</section>
<section id="challenges-with-eval-benchmarks" class="slide level2">
<h2>Challenges with Eval Benchmarks</h2>
<ul>
<li class="fragment">TBD</li>
<li class="fragment">Speak about officially testing vs.&nbsp;self reporting</li>
<li class="fragment">Dataset contamination</li>
<li class="fragment">Link to HF’s latest efforts to try to curb this</li>
<li class="fragment">Don’t test creativity</li>
</ul>
</section></section>
<section id="fine-tuning" class="title-slide slide level1 center">
<h1>Fine-Tuning</h1>
<ul>
<li class="fragment">TBD</li>
<li class="fragment">Why not train from scratch?</li>
<li class="fragment">History of fine-tuning</li>
<li class="fragment">When to fine-tune vs.&nbsp;when to use other approaches</li>
</ul>
</section>

<section>
<section id="generating-fine-tuning-training-data" class="title-slide slide level1 center">
<h1>Generating Fine-Tuning Training Data</h1>

</section>
<section id="generating-fine-tuning-training-data-1" class="slide level2">
<h2>Generating Fine-Tuning Training Data</h2>
<ul>
<li class="fragment">TBD</li>
<li class="fragment">Overview</li>
<li class="fragment">Train, validation, and test datasets</li>
</ul>
</section>
<section id="generating-fine-tuning-training-data-2" class="slide level2">
<h2>Generating Fine-Tuning Training Data</h2>
<ul>
<li class="fragment">Dimensionality of training data
<ul>
<li class="fragment">Why this is important</li>
</ul></li>
<li class="fragment">Dimensions
<ul>
<li class="fragment">Topics (areas, sub-domains)</li>
<li class="fragment">Audience (e.g., school grade)</li>
<li class="fragment">Length (e.g., short, med, long)</li>
<li class="fragment">Formats (e.g., script vs.&nbsp;romanized)</li>
<li class="fragment">Conversation turns (single / multi)</li>
<li class="fragment">Negative answers (e.g., if implementing safety)</li>
</ul></li>
<li class="fragment">Each of these can have weights also</li>
</ul>
</section>
<section id="training-data-format" class="slide level2">
<h2>Training Data format</h2>
<ul>
<li class="fragment">Conversational or raw?
<ul>
<li class="fragment">(and convert to template)</li>
</ul></li>
<li class="fragment">jsonl</li>
<li class="fragment">HF datasets</li>
</ul>
</section>
<section id="how-to-use-a-model-to-generate" class="slide level2">
<h2>How to use a model to generate</h2>
<ul>
<li class="fragment">Local or hosted?</li>
<li class="fragment">Generating in batches</li>
<li class="fragment">Structured outputs</li>
</ul>
</section>
<section id="walkthrough-how-to-do-this" class="slide level2">
<h2>Walkthrough how to do this</h2>
</section></section>
<section id="assignment" class="title-slide slide level1 center">
<h1>Assignment</h1>
<ul>
<li class="fragment">Pick a topic (or choose from these three)</li>
<li class="fragment">Generate the training datasets</li>
<li class="fragment">Upload to HF</li>
</ul>
</section>

<section>
<section id="looking-ahead" class="title-slide slide level1 center">
<h1>Looking Ahead</h1>

</section>
<section id="looking-ahead-1" class="slide level2">
<h2>Looking Ahead</h2>
<ul>
<li class="fragment"><a href="https://simonguest.github.io/CS-394/src/06/assignment.html" class="external" target="_blank">This week’s assignment!</a></li>
<li class="fragment">TBD</li>
</ul>
</section></section>
<section>
<section id="references" class="title-slide slide level1 center">
<h1>References</h1>

</section>
<section id="references-1" class="slide level2">
<h2>References</h2>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="../../theme/logos/DigiPen_RGB_Red.png" class="slide-logo"></p>
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.15,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("https:\/\/simonguest\.github\.io\/CS-394\/");
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    <script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
    (function() {
      let previousOnload = window.onload;
      window.onload = () => {
        if (previousOnload) {
          previousOnload();
        }
        lightboxQuarto.on('slide_before_load', (data) => {
          const { slideIndex, slideNode, slideConfig, player, trigger } = data;
          const href = trigger.getAttribute('href');
          if (href !== null) {
            const imgEl = window.document.querySelector(`a[href="${href}"] img`);
            if (imgEl !== null) {
              const srcAttr = imgEl.getAttribute("src");
              if (srcAttr && srcAttr.startsWith("data:")) {
                slideConfig.href = srcAttr;
              }
            }
          } 
        });
      
        lightboxQuarto.on('slide_after_load', (data) => {
          const { slideIndex, slideNode, slideConfig, player, trigger } = data;
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(slideNode);
          }
        });
      
      };
      
    })();
              </script>
    

</body></html>