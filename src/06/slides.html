<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-597958c53c93a607afca12fd375c57ed.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.26">

  <title>CS-394 – Module 6: Increasing Model Accuracy (Part 1)</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #24292e;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #24292e; } /* Normal */
    code span.al { color: #ff5555; font-weight: bold; } /* Alert */
    code span.an { color: #6a737d; } /* Annotation */
    code span.at { color: #d73a49; } /* Attribute */
    code span.bn { color: #005cc5; } /* BaseN */
    code span.bu { color: #d73a49; } /* BuiltIn */
    code span.cf { color: #d73a49; } /* ControlFlow */
    code span.ch { color: #032f62; } /* Char */
    code span.cn { color: #005cc5; } /* Constant */
    code span.co { color: #6a737d; } /* Comment */
    code span.cv { color: #6a737d; } /* CommentVar */
    code span.do { color: #6a737d; } /* Documentation */
    code span.dt { color: #d73a49; } /* DataType */
    code span.dv { color: #005cc5; } /* DecVal */
    code span.er { color: #ff5555; text-decoration: underline; } /* Error */
    code span.ex { color: #d73a49; font-weight: bold; } /* Extension */
    code span.fl { color: #005cc5; } /* Float */
    code span.fu { color: #6f42c1; } /* Function */
    code span.im { color: #032f62; } /* Import */
    code span.in { color: #6a737d; } /* Information */
    code span.kw { color: #d73a49; } /* Keyword */
    code span.op { color: #24292e; } /* Operator */
    code span.ot { color: #6f42c1; } /* Other */
    code span.pp { color: #d73a49; } /* Preprocessor */
    code span.re { color: #6a737d; } /* RegionMarker */
    code span.sc { color: #005cc5; } /* SpecialChar */
    code span.ss { color: #032f62; } /* SpecialString */
    code span.st { color: #032f62; } /* String */
    code span.va { color: #e36209; } /* Variable */
    code span.vs { color: #032f62; } /* VerbatimString */
    code span.wa { color: #ff5555; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto-eeafb82a00776dbd0312b01cd21cfa25.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Module 6: Increasing Model Accuracy (Part 1)</h1>

<div class="quarto-title-authors">
</div>

</section>
<section id="recap" class="slide level2">
<h2>Recap</h2>
<ul>
<li class="fragment">Understood the use cases, advantages/disadvantages for running models on local hardware - desktop, web, mobile</li>
<li class="fragment">Understood hardware requirements and architectures for model inference - e.g., CUDA vs.&nbsp;ONNX vs.&nbsp;MLX vs.&nbsp;WebGPU</li>
<li class="fragment">Explored how quantization works and understood techniques and formats for quantizing existing models</li>
<li class="fragment">Used llama.cpp to quantize and run an SLM on local hardware/gaming PC</li>
<li class="fragment">Integrated a quantized model within Unity/Unreal/WebAssembly</li>
</ul>
</section>
<section id="lesson-objectives" class="slide level2">
<h2>Lesson Objectives</h2>
<ul>
<li class="fragment">Understand model training, dataset curation, what leads to hallucinations in models, how models are evaluated, and an overview of techniques to increase accuracy</li>
<li class="fragment">Explore use cases, advantages, and disadvantages of prompt engineering</li>
<li class="fragment">Introduce and implement RAG (Retrieval-Augmented Generation) to increase the accuracy of a limited SLM</li>
<li class="fragment">Start the exploration of how to fine-tune models using LoRA (Low Ranked Adaptation)</li>
<li class="fragment">Use a foundational model to generate synthetic data for fine-tuning a 1B parameter model</li>
</ul>
</section>
<section>
<section id="how-models-are-trained" class="title-slide slide level1 center">
<h1>How Models Are Trained</h1>

</section>
<section id="how-models-are-trained-1" class="slide level2">
<h2>How Models Are Trained</h2>
<ul>
<li class="fragment">TBD</li>
<li class="fragment">Rewind, how earlier models were trained</li>
<li class="fragment">What does this look like today</li>
<li class="fragment">Maybe a mention of nanoGPT?</li>
</ul>
</section></section>
<section>
<section id="hallucinations" class="title-slide slide level1 center">
<h1>Hallucinations</h1>

</section>
<section id="hallcuinations" class="slide level2">
<h2>Hallcuinations</h2>
<ul>
<li class="fragment">TBD</li>
<li class="fragment">Why hallucinations happen</li>
<li class="fragment">Common hallucinations</li>
</ul>
</section></section>
<section>
<section id="evaluating-models" class="title-slide slide level1 center">
<h1>Evaluating Models</h1>

</section>
<section id="evaluating-models-1" class="slide level2">
<h2>Evaluating Models</h2>
<ul>
<li class="fragment">TBD</li>
<li class="fragment">Before we look at improving accuracy of models, should understand how models are evaluated</li>
<li class="fragment">How evaluations work, especially on non-multiple choice questions</li>
</ul>
</section>
<section id="mmlu-pro-massive-multitask-language-understanding" class="slide level2">
<h2>MMLU-Pro (Massive Multitask Language Understanding)</h2>
<p><a href="https://huggingface.co/datasets/TIGER-Lab/MMLU-Pro" class="external" target="_blank">https://huggingface.co/datasets/TIGER-Lab/MMLU-Pro</a></p>
<ul>
<li class="fragment"><strong>What it tests:</strong> 12K questions across 14 subject areas that cover STEM, humanities, social sciences, and professional domains.
<ul>
<li class="fragment">Multiple-choice questions (10 options) testing both factual knowledge and reasoning across elementary to professional levels.</li>
</ul></li>
<li class="fragment"><strong>History:</strong> Original MMLU published in 2021 by Dan Hendrycks et al.&nbsp;
<ul>
<li class="fragment">MMLU-Pro created because models were plateauing on MMLU (hitting 85-90%+)</li>
<li class="fragment">Pro released in June 2024 by the TIGER-AI-Lab team and accepted at NeurIPS 2024</li>
</ul></li>
</ul>
</section>
<section id="gpqa-graduate-level-google-proof-qa" class="slide level2">
<h2>GPQA (Graduate-Level Google-Proof Q&amp;A)</h2>
<p><a href="https://huggingface.co/datasets/Idavidrein/gpqa" class="external" target="_blank">https://huggingface.co/datasets/Idavidrein/gpqa</a></p>
<ul>
<li class="fragment"><strong>What it tests:</strong> Graduate/PhD-level scientific reasoning in biology, physics, and chemistry through multiple-choice questions
<ul>
<li class="fragment">Require deep domain understanding, not just fact recall</li>
<li class="fragment">Cannot be solved by web search (the “Google-proof” property)</li>
<li class="fragment">Test genuine conceptual reasoning and problem-solving</li>
</ul></li>
<li class="fragment"><strong>History:</strong>
<ul>
<li class="fragment">Created Nov 2023 by David Rein et al.&nbsp;(includes researchers from NYU, Anthropic, and other institutions)</li>
</ul></li>
</ul>
</section>
<section id="swe-bench" class="slide level2">
<h2>SWE-Bench</h2>
<p><a href="https://www.swebench.com/" class="external" target="_blank">https://www.swebench.com/</a></p>
<ul>
<li class="fragment"><strong>What it tests:</strong> AI systems’ ability to solve real-world software engineering tasks by resolving actual GitHub issues from popular open-source Python repositories</li>
<li class="fragment"><strong>History:</strong> Created: 2023 by Princeton NLP group (Carlos E. Jimenez et al.)
<ul>
<li class="fragment">Original dataset was 2,294 GitHub issues from 12 popular Python repositories (Django, scikit-learn, Flask, Matplotlib, Requests, SymPy, pytest, Sphinx, etc.)</li>
<li class="fragment">Three major variants: Lite, Verified, and Pro</li>
<li class="fragment">Microsoft also publishes a “Live” version with monthly curated updates</li>
</ul></li>
</ul>
</section>
<section id="hle-humanitys-last-exam" class="slide level2">
<h2>HLE (Humanity’s Last Exam)</h2>
<p><a href="https://huggingface.co/datasets/cais/hle" class="external" target="_blank">https://huggingface.co/datasets/cais/hle</a></p>
<ul>
<li class="fragment"><strong>What it tests:</strong> 2,500 expert-level questions across dozens of subjects, including mathematics, humanities, and the natural sciences.
<ul>
<li class="fragment">HLE is developed globally by subject-matter experts and consists of multiple-choice and short-answer questions suitable for automated grading.</li>
<li class="fragment">Require multimodal, multi-step reasoning rather than pattern matching or recall</li>
<li class="fragment">Be “Google-proof” (can’t be quickly answered by web search)</li>
</ul></li>
<li class="fragment"><strong>History:</strong> Created in late 2024 by the Center for AI Safety (CAIS) and Scale AI
<ul>
<li class="fragment">Led by: Dan Hendrycks (who also created MMLU and MATH benchmarks)</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="demo-of-benchmarks" class="title-slide slide level1 center">
<h1>Demo of Benchmarks</h1>

</section>
<section id="challenges-with-eval-benchmarks" class="slide level2">
<h2>Challenges with Eval Benchmarks</h2>
<ul>
<li class="fragment">TBD</li>
<li class="fragment">Speak about officially testing vs.&nbsp;self reporting</li>
<li class="fragment">Dataset contamination</li>
<li class="fragment">Link to HF’s latest efforts to try to curb this</li>
<li class="fragment">Don’t test creativity</li>
</ul>
</section></section>
<section>
<section id="model-accuracy" class="title-slide slide level1 center">
<h1>Model Accuracy</h1>

</section>
<section id="model-accuracy-1" class="slide level2">
<h2>Model Accuracy</h2>
<ul>
<li class="fragment">Intro to how models can be improved
<ul>
<li class="fragment">Better prompt engineering</li>
<li class="fragment">Reasoning/Chain of thought</li>
<li class="fragment">Context Injection, leading to RAG - Retrieval Augmented Generation</li>
</ul></li>
</ul>
</section>
<section id="prompt-engineering" class="slide level2">
<h2>Prompt Engineering</h2>
<ul>
<li class="fragment">TBD</li>
<li class="fragment">Back to the three areas we mentioned in module 2</li>
<li class="fragment">Maybe look at the system prompts</li>
</ul>
</section>
<section id="prompt-engineering-1" class="slide level2">
<h2>Prompt Engineering</h2>
<ul>
<li class="fragment">System Prompt best practices
<ul>
<li class="fragment"><strong>Be specific</strong>: “You are a Python programming tutor who explains concepts using simple analogies and provides code examples.”</li>
<li class="fragment"><strong>Define output</strong>: “List no more than 3 suggestions. Always show your work step by step.”</li>
<li class="fragment"><strong>Set boundaries</strong>: “If you are asked questions outside coding, politely redirect the student back to the task.”</li>
</ul></li>
</ul>
</section>
<section id="reasoning" class="slide level2">
<h2>Reasoning</h2>
<ul>
<li class="fragment">TBD</li>
<li class="fragment">Reasoning and Chain of Thought as ways to increase accuracy</li>
</ul>
</section>
<section id="reasoning-1" class="slide level2">
<h2>Reasoning</h2>
<ul>
<li class="fragment">TBD</li>
<li class="fragment">Prompt engineering and reasoning helps guide the model to the type of output you want - but it doesn’t solve the problem of getting the right answer</li>
<li class="fragment">Enter RAG</li>
</ul>
</section></section>
<section>
<section id="context-injection" class="title-slide slide level1 center">
<h1>Context Injection</h1>

</section>
<section id="context-injection-1" class="slide level2">
<h2>Context Injection</h2>
<ul>
<li class="fragment">A model’s training data will only only answer so much
<ul>
<li class="fragment">Training data has a cut-off: Your model won’t know anything after that</li>
<li class="fragment">Your model won’t know if anything has changed since being trained</li>
<li class="fragment">Function calling can help bridge this gap, but context injection is often simpler and more flexible</li>
</ul></li>
</ul>
</section>
<section id="context-injection-2" class="slide level2">
<h2>Context Injection</h2>
<ul>
<li class="fragment">How it works
<ul>
<li class="fragment">Take the user’s prompt (e.g., “Who teaches CS-394?”)</li>
<li class="fragment">Do a database look-up to find relevant information (context)</li>
<li class="fragment">Inject that context into the system prompt</li>
<li class="fragment">Call the model with the modified system prompt</li>
</ul></li>
</ul>
</section>
<section id="context-injection-3" class="slide level2">
<h2>Context Injection</h2>
<ul>
<li class="fragment">The injected information is called ‘context’, and adding it is called ‘augmenting’ the prompt
<ul>
<li class="fragment">Hence the popular term, augmented generation</li>
<li class="fragment">Two examples:
<ul>
<li class="fragment">SQL-Augmented Generation</li>
<li class="fragment">Retrieval-Augmented Generation</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="sql-augmented-generation" class="slide level2">
<h2>SQL-Augmented Generation</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/sql-augmented.ipynb" data-notebook-title="SQL-Augmented Generation" data-notebook-cellid="call-without">
<div id="call-without" class="cell" data-execution_count="38">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a></a>response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb1-2"><a></a>    model<span class="op">=</span>MODEL,</span>
<span id="cb1-3"><a></a>    messages<span class="op">=</span>[</span>
<span id="cb1-4"><a></a>        {<span class="st">"role"</span>: <span class="st">"system"</span>, <span class="st">"content"</span>: <span class="st">"You help students lookup course information."</span>},</span>
<span id="cb1-5"><a></a>        {<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: USER_PROMPT},</span>
<span id="cb1-6"><a></a>    ],</span>
<span id="cb1-7"><a></a>)</span>
<span id="cb1-8"><a></a>response.choices[<span class="dv">0</span>].message.content</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="sql-augmented-generation-1" class="slide level2">
<h2>SQL-Augmented Generation</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/sql-augmented.ipynb" data-notebook-title="SQL-Augmented Generation" data-notebook-cellid="call-without">
<div id="call-without" class="cell" data-execution_count="38">
<div class="cell-output cell-output-display" data-execution_count="38">
<pre><code>"I don't have access to specific course details like instructors for CS-394, as that information is typically managed by educational institutions. To find out who teaches CS-394, you could:\n\n1. Check your university/department's official course schedule or syllabus.  \n2. Contact the course instructor or department directly via email or phone.  \n3. Use your school's learning management system (e.g., Moodle, Canvas) if the course is listed there.  \n\nLet me know if you'd help drafting a message to inquire!\n"</code></pre>
</div>
</div>
</div>
</section>
<section id="sql-augmented-generation-2" class="slide level2">
<h2>SQL-Augmented Generation</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/sql-augmented.ipynb" data-notebook-title="SQL-Augmented Generation" data-notebook-cellid="create-db">
<div id="create-db" class="cell" data-execution_count="33">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a></a><span class="im">import</span> sqlite3</span>
<span id="cb3-2"><a></a><span class="im">import</span> os</span>
<span id="cb3-3"><a></a></span>
<span id="cb3-4"><a></a><span class="kw">def</span> create_and_populate_db(db_path<span class="op">=</span>DB_PATH):</span>
<span id="cb3-5"><a></a>    db_exists <span class="op">=</span> os.path.exists(db_path)</span>
<span id="cb3-6"><a></a></span>
<span id="cb3-7"><a></a>    conn <span class="op">=</span> sqlite3.<span class="ex">connect</span>(db_path)</span>
<span id="cb3-8"><a></a>    conn.row_factory <span class="op">=</span> sqlite3.Row</span>
<span id="cb3-9"><a></a>    cursor <span class="op">=</span> conn.cursor()</span>
<span id="cb3-10"><a></a></span>
<span id="cb3-11"><a></a>    <span class="cf">if</span> db_exists:</span>
<span id="cb3-12"><a></a>        <span class="bu">print</span>(<span class="ss">f"Found existing database at '</span><span class="sc">{</span>db_path<span class="sc">}</span><span class="ss">'. Skipping creation."</span>)</span>
<span id="cb3-13"><a></a>        <span class="cf">return</span> conn</span>
<span id="cb3-14"><a></a></span>
<span id="cb3-15"><a></a>    <span class="bu">print</span>(<span class="ss">f"Creating new database at '</span><span class="sc">{</span>db_path<span class="sc">}</span><span class="ss">'..."</span>)</span>
<span id="cb3-16"><a></a></span>
<span id="cb3-17"><a></a>    <span class="co"># --- Schema ---</span></span>
<span id="cb3-18"><a></a>    cursor.executescript(<span class="st">"""</span></span>
<span id="cb3-19"><a></a><span class="st">        CREATE TABLE instructors (</span></span>
<span id="cb3-20"><a></a><span class="st">            id          INTEGER PRIMARY KEY,</span></span>
<span id="cb3-21"><a></a><span class="st">            name        TEXT NOT NULL,</span></span>
<span id="cb3-22"><a></a><span class="st">            email       TEXT,</span></span>
<span id="cb3-23"><a></a><span class="st">            department  TEXT,</span></span>
<span id="cb3-24"><a></a><span class="st">            bio         TEXT</span></span>
<span id="cb3-25"><a></a><span class="st">        );</span></span>
<span id="cb3-26"><a></a></span>
<span id="cb3-27"><a></a><span class="st">        CREATE TABLE courses (</span></span>
<span id="cb3-28"><a></a><span class="st">            id              INTEGER PRIMARY KEY,</span></span>
<span id="cb3-29"><a></a><span class="st">            code            TEXT NOT NULL UNIQUE,</span></span>
<span id="cb3-30"><a></a><span class="st">            title           TEXT NOT NULL,</span></span>
<span id="cb3-31"><a></a><span class="st">            description     TEXT,</span></span>
<span id="cb3-32"><a></a><span class="st">            credits         INTEGER,</span></span>
<span id="cb3-33"><a></a><span class="st">            level           TEXT CHECK(level IN ('intro', 'intermediate', 'advanced')),</span></span>
<span id="cb3-34"><a></a><span class="st">            instructor_id   INTEGER REFERENCES instructors(id),</span></span>
<span id="cb3-35"><a></a><span class="st">            max_enrollment  INTEGER</span></span>
<span id="cb3-36"><a></a><span class="st">        );</span></span>
<span id="cb3-37"><a></a></span>
<span id="cb3-38"><a></a><span class="st">        CREATE TABLE schedules (</span></span>
<span id="cb3-39"><a></a><span class="st">            id          INTEGER PRIMARY KEY,</span></span>
<span id="cb3-40"><a></a><span class="st">            course_id   INTEGER REFERENCES courses(id),</span></span>
<span id="cb3-41"><a></a><span class="st">            days        TEXT,</span></span>
<span id="cb3-42"><a></a><span class="st">            time_start  TEXT,</span></span>
<span id="cb3-43"><a></a><span class="st">            time_end    TEXT,</span></span>
<span id="cb3-44"><a></a><span class="st">            room        TEXT,</span></span>
<span id="cb3-45"><a></a><span class="st">            semester    TEXT</span></span>
<span id="cb3-46"><a></a><span class="st">        );</span></span>
<span id="cb3-47"><a></a><span class="st">    """</span>)</span>
<span id="cb3-48"><a></a></span>
<span id="cb3-49"><a></a>    <span class="co"># --- Instructors ---</span></span>
<span id="cb3-50"><a></a>    cursor.executemany(</span>
<span id="cb3-51"><a></a>        <span class="st">"INSERT INTO instructors (name, email, department, bio) VALUES (?, ?, ?, ?)"</span>,</span>
<span id="cb3-52"><a></a>        [</span>
<span id="cb3-53"><a></a>            (<span class="st">"Dr. Sarah Chen"</span>, <span class="st">"s.chen@university.edu"</span>, <span class="st">"Computer Science"</span>,</span>
<span id="cb3-54"><a></a>             <span class="st">"Specializes in machine learning and NLP. Author of 'Practical Deep Learning'."</span>),</span>
<span id="cb3-55"><a></a>            (<span class="st">"Prof. Marcus Webb"</span>, <span class="st">"m.webb@university.edu"</span>, <span class="st">"Computer Science"</span>,</span>
<span id="cb3-56"><a></a>             <span class="st">"Focuses on systems programming and computer architecture."</span>),</span>
<span id="cb3-57"><a></a>            (<span class="st">"Dr. Priya Nair"</span>, <span class="st">"p.nair@university.edu"</span>, <span class="st">"Data Science"</span>,</span>
<span id="cb3-58"><a></a>             <span class="st">"Expert in statistical learning, data visualization, and reproducible research."</span>),</span>
<span id="cb3-59"><a></a>            (<span class="st">"Prof. James Okafor"</span>, <span class="st">"j.okafor@university.edu"</span>, <span class="st">"Computer Science"</span>,</span>
<span id="cb3-60"><a></a>             <span class="st">"Teaches software engineering and has 10 years of industry experience at major tech firms."</span>),</span>
<span id="cb3-61"><a></a>            (<span class="st">"Dr. Elena Russo"</span>, <span class="st">"e.russo@university.edu"</span>, <span class="st">"Mathematics"</span>,</span>
<span id="cb3-62"><a></a>             <span class="st">"Research interests include linear algebra, optimization, and mathematical foundations of AI."</span>),</span>
<span id="cb3-63"><a></a>        ]</span>
<span id="cb3-64"><a></a>    )</span>
<span id="cb3-65"><a></a></span>
<span id="cb3-66"><a></a>    <span class="co"># --- Courses ---</span></span>
<span id="cb3-67"><a></a>    cursor.executemany(</span>
<span id="cb3-68"><a></a>        <span class="st">"""INSERT INTO courses (code, title, description, credits, level, instructor_id, max_enrollment)</span></span>
<span id="cb3-69"><a></a><span class="st">           VALUES (?, ?, ?, ?, ?, ?, ?)"""</span>,</span>
<span id="cb3-70"><a></a>        [</span>
<span id="cb3-71"><a></a>            (<span class="st">"CS-101"</span>, <span class="st">"Introduction to Programming"</span>,</span>
<span id="cb3-72"><a></a>             <span class="st">"Fundamentals of programming using Python. Covers variables, control flow, functions, and basic data structures."</span>,</span>
<span id="cb3-73"><a></a>             <span class="dv">3</span>, <span class="st">"intro"</span>, <span class="dv">2</span>, <span class="dv">40</span>),</span>
<span id="cb3-74"><a></a>            (<span class="st">"CS-201"</span>, <span class="st">"Data Structures and Algorithms"</span>,</span>
<span id="cb3-75"><a></a>             <span class="st">"Core data structures including linked lists, trees, graphs, and hash tables. Algorithm design and complexity analysis."</span>,</span>
<span id="cb3-76"><a></a>             <span class="dv">3</span>, <span class="st">"intermediate"</span>, <span class="dv">2</span>, <span class="dv">35</span>),</span>
<span id="cb3-77"><a></a>            (<span class="st">"CS-301"</span>, <span class="st">"Machine Learning Fundamentals"</span>,</span>
<span id="cb3-78"><a></a>             <span class="st">"Supervised and unsupervised learning, model evaluation, feature engineering, and scikit-learn. Final project required."</span>,</span>
<span id="cb3-79"><a></a>             <span class="dv">4</span>, <span class="st">"intermediate"</span>, <span class="dv">1</span>, <span class="dv">30</span>),</span>
<span id="cb3-80"><a></a>            (<span class="st">"CS-394"</span>, <span class="st">"How Generative AI Works"</span>,</span>
<span id="cb3-81"><a></a>             <span class="st">"Transformer architectures, large language models, prompt engineering, fine-tuning, and deployment. Hands-on with open-source models."</span>,</span>
<span id="cb3-82"><a></a>             <span class="dv">3</span>, <span class="st">"advanced"</span>, <span class="dv">1</span>, <span class="dv">25</span>),</span>
<span id="cb3-83"><a></a>            (<span class="st">"CS-310"</span>, <span class="st">"Database Systems"</span>,</span>
<span id="cb3-84"><a></a>             <span class="st">"Relational database design, SQL, transactions, indexing, and an introduction to NoSQL systems."</span>,</span>
<span id="cb3-85"><a></a>             <span class="dv">3</span>, <span class="st">"intermediate"</span>, <span class="dv">2</span>, <span class="dv">20</span>)</span>
<span id="cb3-86"><a></a>        ]</span>
<span id="cb3-87"><a></a>    )</span>
<span id="cb3-88"><a></a></span>
<span id="cb3-89"><a></a>    <span class="co"># --- Schedules ---</span></span>
<span id="cb3-90"><a></a>    cursor.executemany(</span>
<span id="cb3-91"><a></a>        <span class="st">"""INSERT INTO schedules (course_id, days, time_start, time_end, room, semester)</span></span>
<span id="cb3-92"><a></a><span class="st">           VALUES (?, ?, ?, ?, ?, ?)"""</span>,</span>
<span id="cb3-93"><a></a>        [</span>
<span id="cb3-94"><a></a>            (<span class="dv">1</span>,  <span class="st">"Mon/Wed/Fri"</span>, <span class="st">"09:00"</span>, <span class="st">"09:50"</span>, <span class="st">"Room 101"</span>, <span class="st">"Spring 2026"</span>),</span>
<span id="cb3-95"><a></a>            (<span class="dv">2</span>,  <span class="st">"Tue/Thu"</span>,     <span class="st">"10:00"</span>, <span class="st">"11:20"</span>, <span class="st">"Room 204"</span>, <span class="st">"Spring 2026"</span>),</span>
<span id="cb3-96"><a></a>            (<span class="dv">3</span>,  <span class="st">"Mon/Wed"</span>,     <span class="st">"13:00"</span>, <span class="st">"14:20"</span>, <span class="st">"Lab 12"</span>,   <span class="st">"Spring 2026"</span>),</span>
<span id="cb3-97"><a></a>            (<span class="dv">4</span>,  <span class="st">"Tue/Thu"</span>,     <span class="st">"14:00"</span>, <span class="st">"15:20"</span>, <span class="st">"Lab 12"</span>,   <span class="st">"Spring 2026"</span>),</span>
<span id="cb3-98"><a></a>            (<span class="dv">5</span>,  <span class="st">"Mon/Wed/Fri"</span>, <span class="st">"11:00"</span>, <span class="st">"11:50"</span>, <span class="st">"Room 305"</span>, <span class="st">"Spring 2026"</span>),</span>
<span id="cb3-99"><a></a>        ]</span>
<span id="cb3-100"><a></a>    )</span>
<span id="cb3-101"><a></a></span>
<span id="cb3-102"><a></a>    conn.commit()</span>
<span id="cb3-103"><a></a>    <span class="bu">print</span>(<span class="st">"Database created and populated successfully."</span>)</span>
<span id="cb3-104"><a></a>    <span class="bu">print</span>(<span class="ss">f"  - </span><span class="sc">{</span>cursor<span class="sc">.</span>execute(<span class="st">'SELECT COUNT(*) FROM instructors'</span>)<span class="sc">.</span>fetchone()[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> instructors"</span>)</span>
<span id="cb3-105"><a></a>    <span class="bu">print</span>(<span class="ss">f"  - </span><span class="sc">{</span>cursor<span class="sc">.</span>execute(<span class="st">'SELECT COUNT(*) FROM courses'</span>)<span class="sc">.</span>fetchone()[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> courses"</span>)</span>
<span id="cb3-106"><a></a>    <span class="bu">print</span>(<span class="ss">f"  - </span><span class="sc">{</span>cursor<span class="sc">.</span>execute(<span class="st">'SELECT COUNT(*) FROM schedules'</span>)<span class="sc">.</span>fetchone()[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> schedules"</span>)</span>
<span id="cb3-107"><a></a></span>
<span id="cb3-108"><a></a>    <span class="cf">return</span> conn</span>
<span id="cb3-109"><a></a></span>
<span id="cb3-110"><a></a>create_and_populate_db()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="sql-augmented-generation-3" class="slide level2">
<h2>SQL-Augmented Generation</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/sql-augmented.ipynb" data-notebook-title="SQL-Augmented Generation" data-notebook-cellid="build-context">
<div id="build-context" class="cell" data-execution_count="34">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a></a><span class="im">import</span> sqlite3</span>
<span id="cb4-2"><a></a><span class="im">import</span> re</span>
<span id="cb4-3"><a></a></span>
<span id="cb4-4"><a></a><span class="kw">def</span> get_course_by_code(conn, code):</span>
<span id="cb4-5"><a></a>    <span class="co">"""Return full details for a single course by its code (e.g. 'CS-394')."""</span></span>
<span id="cb4-6"><a></a>    <span class="cf">return</span> conn.execute(<span class="st">"""</span></span>
<span id="cb4-7"><a></a><span class="st">        SELECT</span></span>
<span id="cb4-8"><a></a><span class="st">            c.code,</span></span>
<span id="cb4-9"><a></a><span class="st">            c.title,</span></span>
<span id="cb4-10"><a></a><span class="st">            c.credits,</span></span>
<span id="cb4-11"><a></a><span class="st">            c.level,</span></span>
<span id="cb4-12"><a></a><span class="st">            c.description,</span></span>
<span id="cb4-13"><a></a><span class="st">            c.max_enrollment,</span></span>
<span id="cb4-14"><a></a><span class="st">            i.name AS instructor,</span></span>
<span id="cb4-15"><a></a><span class="st">            i.email AS instructor_email,</span></span>
<span id="cb4-16"><a></a><span class="st">            i.bio AS instructor_bio,</span></span>
<span id="cb4-17"><a></a><span class="st">            s.days,</span></span>
<span id="cb4-18"><a></a><span class="st">            s.time_start,</span></span>
<span id="cb4-19"><a></a><span class="st">            s.time_end,</span></span>
<span id="cb4-20"><a></a><span class="st">            s.room,</span></span>
<span id="cb4-21"><a></a><span class="st">            s.semester</span></span>
<span id="cb4-22"><a></a><span class="st">        FROM courses c</span></span>
<span id="cb4-23"><a></a><span class="st">        JOIN instructors i ON c.instructor_id = i.id</span></span>
<span id="cb4-24"><a></a><span class="st">        JOIN schedules s   ON s.course_id = c.id</span></span>
<span id="cb4-25"><a></a><span class="st">        WHERE UPPER(c.code) = UPPER(?)</span></span>
<span id="cb4-26"><a></a><span class="st">    """</span>, (code,)).fetchone()</span>
<span id="cb4-27"><a></a></span>
<span id="cb4-28"><a></a></span>
<span id="cb4-29"><a></a></span>
<span id="cb4-30"><a></a><span class="kw">def</span> rows_to_text(rows):</span>
<span id="cb4-31"><a></a>    <span class="co">"""Convert sqlite3.Row results into a readable string block."""</span></span>
<span id="cb4-32"><a></a>    <span class="cf">if</span> <span class="kw">not</span> rows:</span>
<span id="cb4-33"><a></a>        <span class="cf">return</span> <span class="st">"No results found."</span></span>
<span id="cb4-34"><a></a>    <span class="cf">if</span> <span class="bu">isinstance</span>(rows, sqlite3.Row):</span>
<span id="cb4-35"><a></a>        rows <span class="op">=</span> [rows]</span>
<span id="cb4-36"><a></a>    <span class="cf">return</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>.join(</span>
<span id="cb4-37"><a></a>        <span class="st">"  "</span> <span class="op">+</span> <span class="st">", "</span>.join(<span class="ss">f"</span><span class="sc">{</span>k<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>row[k]<span class="sc">}</span><span class="ss">"</span> <span class="cf">for</span> k <span class="kw">in</span> row.keys())</span>
<span id="cb4-38"><a></a>        <span class="cf">for</span> row <span class="kw">in</span> rows</span>
<span id="cb4-39"><a></a>    )</span>
<span id="cb4-40"><a></a></span>
<span id="cb4-41"><a></a></span>
<span id="cb4-42"><a></a><span class="kw">def</span> build_context(conn, user_query):</span>
<span id="cb4-43"><a></a>    <span class="co">"""</span></span>
<span id="cb4-44"><a></a><span class="co">    Extract a course code from the user query and retrieve its details.</span></span>
<span id="cb4-45"><a></a><span class="co">    Returns a formatted string ready to inject into the system prompt.</span></span>
<span id="cb4-46"><a></a><span class="co">    """</span></span>
<span id="cb4-47"><a></a>    code_match <span class="op">=</span> re.search(<span class="vs">r'</span><span class="dv">\b</span><span class="kw">(</span><span class="pp">[A-Z]</span><span class="op">{2,4}</span><span class="vs">-</span><span class="dv">\d</span><span class="op">{3}</span><span class="kw">)</span><span class="dv">\b</span><span class="vs">'</span>, user_query.upper())</span>
<span id="cb4-48"><a></a></span>
<span id="cb4-49"><a></a>    <span class="cf">if</span> <span class="kw">not</span> code_match:</span>
<span id="cb4-50"><a></a>        <span class="cf">return</span> <span class="st">"No course code found in query. Please include a course code (e.g. CS-394)."</span></span>
<span id="cb4-51"><a></a></span>
<span id="cb4-52"><a></a>    code <span class="op">=</span> code_match.group(<span class="dv">1</span>)</span>
<span id="cb4-53"><a></a>    course <span class="op">=</span> get_course_by_code(conn, code)</span>
<span id="cb4-54"><a></a></span>
<span id="cb4-55"><a></a>    <span class="cf">if</span> <span class="kw">not</span> course:</span>
<span id="cb4-56"><a></a>        <span class="cf">return</span> <span class="ss">f"No course found with code </span><span class="sc">{</span>code<span class="sc">}</span><span class="ss">."</span></span>
<span id="cb4-57"><a></a></span>
<span id="cb4-58"><a></a>    <span class="cf">return</span> (</span>
<span id="cb4-59"><a></a>        <span class="ss">f"Course details for </span><span class="sc">{</span>code<span class="sc">}</span><span class="ss">:</span><span class="ch">\n</span><span class="sc">{</span>rows_to_text(course)<span class="sc">}</span><span class="ch">\n\n</span><span class="ss">"</span></span>
<span id="cb4-60"><a></a>    )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="sql-augmented-generation-4" class="slide level2">
<h2>SQL-Augmented Generation</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/sql-augmented.ipynb" data-notebook-title="SQL-Augmented Generation" data-notebook-cellid="call-with">
<div id="call-with" class="cell" data-execution_count="39">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a></a><span class="co"># Connect to the sqlite database</span></span>
<span id="cb5-2"><a></a>conn <span class="op">=</span> create_and_populate_db()</span>
<span id="cb5-3"><a></a></span>
<span id="cb5-4"><a></a><span class="co"># Query the database based on the user prompt</span></span>
<span id="cb5-5"><a></a>context <span class="op">=</span> build_context(conn, USER_PROMPT)</span>
<span id="cb5-6"><a></a></span>
<span id="cb5-7"><a></a><span class="co"># Create system prompt</span></span>
<span id="cb5-8"><a></a>SYSTEM_PROMPT <span class="op">=</span> <span class="ss">f"""</span></span>
<span id="cb5-9"><a></a><span class="ss">You help students lookup course information. Here are the course details:</span></span>
<span id="cb5-10"><a></a></span>
<span id="cb5-11"><a></a><span class="ss">---COURSE INFORMATION---</span></span>
<span id="cb5-12"><a></a><span class="sc">{</span>context<span class="sc">}</span></span>
<span id="cb5-13"><a></a><span class="ss">---END COURSE INFORMATION---</span></span>
<span id="cb5-14"><a></a><span class="ss">"""</span></span>
<span id="cb5-15"><a></a></span>
<span id="cb5-16"><a></a><span class="co"># Query the model</span></span>
<span id="cb5-17"><a></a>response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb5-18"><a></a>    model<span class="op">=</span>MODEL,</span>
<span id="cb5-19"><a></a>    messages<span class="op">=</span>[</span>
<span id="cb5-20"><a></a>        {<span class="st">"role"</span>: <span class="st">"system"</span>, <span class="st">"content"</span>: SYSTEM_PROMPT},</span>
<span id="cb5-21"><a></a>        {<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: USER_PROMPT},</span>
<span id="cb5-22"><a></a>    ],</span>
<span id="cb5-23"><a></a>)</span>
<span id="cb5-24"><a></a>response.choices[<span class="dv">0</span>].message.content</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="sql-augmented-generation-5" class="slide level2">
<h2>SQL-Augmented Generation</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/sql-augmented.ipynb" data-notebook-title="SQL-Augmented Generation" data-notebook-cellid="call-with">
<div id="call-with" class="cell" data-execution_count="39">
<div class="cell-output cell-output-stdout">
<pre><code>Found existing database at '.data/course_catalog.db'. Skipping creation.</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>'The instructor for CS-394 "How Generative AI Works" is **Dr. Sarah Chen**.\n'</code></pre>
</div>
</div>
</div>
</section>
<section id="sql-augmented-generation-6" class="slide level2">
<h2>SQL-Augmented Generation</h2>
<ul>
<li class="fragment">Good results, but…
<ul>
<li class="fragment">Requires the course code to be in the user prompt, matched to a RegEx pattern</li>
<li class="fragment">Will answer “Who teaches CS-394?” and “When is CS-394 held?”</li>
<li class="fragment">Won’t answer broader queries:
<ul>
<li class="fragment">“What courses teach generative AI?”</li>
<li class="fragment">“Which courses are on Friday afternoons?”</li>
</ul></li>
<li class="fragment">Could make a free-text search through the database…</li>
<li class="fragment">But there’s a better way…</li>
</ul></li>
</ul>
</section>
<section id="rag-retrieval-augmented-generation" class="slide level2">
<h2>RAG: Retrieval-Augmented Generation</h2>
<ul>
<li class="fragment">Roots of RAG trace back to 1950s and 60s, when researchers were working with vector space models</li>
<li class="fragment">Term was coined in 2020 in “Retrieval-Augmented Generation for Knowledge-Intensive NLP Tasks” by Patrick Lewis et. al (https://arxiv.org/pdf/2005.11401)</li>
<li class="fragment">“We definitely would have put more thought into the name had we known our work would become so widespread”</li>
</ul>
</section>
<section id="how-rag-works" class="slide level2">
<h2>How RAG Works</h2>
<ul>
<li class="fragment">Create “documents”
<ul>
<li class="fragment">Strings of text - can be from existing db queries or scraped from PDFs</li>
<li class="fragment">Generate embeddings (using a Sentence Transformer)</li>
<li class="fragment">Store embeddings in a database</li>
</ul></li>
<li class="fragment">User prompt is converted into an embedding</li>
<li class="fragment">Find the closest set of embeddings that match and inject into the system prompt</li>
</ul>
</section>
<section id="sidebar-sentence-transformers" class="slide level2">
<h2>Sidebar: Sentence Transformers</h2>
<ul>
<li class="fragment">In Module 1, we covered Word2Vec
<ul>
<li class="fragment">Creating embeddings from words</li>
</ul></li>
<li class="fragment">A sentence transformer creates embeddings from sentences</li>
<li class="fragment">Many models available (e.g., all-MiniLM-L6-v2, a 384-dim vector space)</li>
</ul>
</section>
<section id="how-rag-works-1" class="slide level2">
<h2>How RAG Works</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/rag.ipynb" data-notebook-title="RAG (Retrieval Augmented Generation)" data-notebook-cellid="create-db">
<div id="create-db" class="cell" data-execution_count="11">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a></a><span class="im">import</span> os</span>
<span id="cb8-2"><a></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb8-3"><a></a></span>
<span id="cb8-4"><a></a><span class="kw">def</span> create_connection(db_path<span class="op">=</span>DB_PATH):</span>
<span id="cb8-5"><a></a>    conn <span class="op">=</span> sqlite3.<span class="ex">connect</span>(db_path)</span>
<span id="cb8-6"><a></a>    conn.row_factory <span class="op">=</span> sqlite3.Row</span>
<span id="cb8-7"><a></a>    conn.enable_load_extension(<span class="va">True</span>)</span>
<span id="cb8-8"><a></a>    sqlite_vec.load(conn)</span>
<span id="cb8-9"><a></a>    conn.enable_load_extension(<span class="va">False</span>)</span>
<span id="cb8-10"><a></a>    <span class="cf">return</span> conn</span>
<span id="cb8-11"><a></a></span>
<span id="cb8-12"><a></a><span class="kw">def</span> create_and_populate_db(db_path<span class="op">=</span>DB_PATH):</span>
<span id="cb8-13"><a></a>    db_exists <span class="op">=</span> os.path.exists(db_path)</span>
<span id="cb8-14"><a></a></span>
<span id="cb8-15"><a></a>    conn <span class="op">=</span> create_connection(db_path)</span>
<span id="cb8-16"><a></a>    cursor <span class="op">=</span> conn.cursor()</span>
<span id="cb8-17"><a></a></span>
<span id="cb8-18"><a></a>    <span class="cf">if</span> db_exists:</span>
<span id="cb8-19"><a></a>        <span class="bu">print</span>(<span class="ss">f"Found existing database at '</span><span class="sc">{</span>db_path<span class="sc">}</span><span class="ss">'. Skipping creation."</span>)</span>
<span id="cb8-20"><a></a>        <span class="cf">return</span> conn</span>
<span id="cb8-21"><a></a></span>
<span id="cb8-22"><a></a>    <span class="bu">print</span>(<span class="ss">f"Creating new database at '</span><span class="sc">{</span>db_path<span class="sc">}</span><span class="ss">'..."</span>)</span>
<span id="cb8-23"><a></a></span>
<span id="cb8-24"><a></a>    <span class="co"># --- Schema ---</span></span>
<span id="cb8-25"><a></a>    cursor.executescript(<span class="st">"""</span></span>
<span id="cb8-26"><a></a><span class="st">        CREATE TABLE instructors (</span></span>
<span id="cb8-27"><a></a><span class="st">            id          INTEGER PRIMARY KEY,</span></span>
<span id="cb8-28"><a></a><span class="st">            name        TEXT NOT NULL,</span></span>
<span id="cb8-29"><a></a><span class="st">            email       TEXT,</span></span>
<span id="cb8-30"><a></a><span class="st">            department  TEXT,</span></span>
<span id="cb8-31"><a></a><span class="st">            bio         TEXT</span></span>
<span id="cb8-32"><a></a><span class="st">        );</span></span>
<span id="cb8-33"><a></a></span>
<span id="cb8-34"><a></a><span class="st">        CREATE TABLE courses (</span></span>
<span id="cb8-35"><a></a><span class="st">            id              INTEGER PRIMARY KEY,</span></span>
<span id="cb8-36"><a></a><span class="st">            code            TEXT NOT NULL UNIQUE,</span></span>
<span id="cb8-37"><a></a><span class="st">            title           TEXT NOT NULL,</span></span>
<span id="cb8-38"><a></a><span class="st">            description     TEXT,</span></span>
<span id="cb8-39"><a></a><span class="st">            credits         INTEGER,</span></span>
<span id="cb8-40"><a></a><span class="st">            level           TEXT CHECK(level IN ('intro', 'intermediate', 'advanced')),</span></span>
<span id="cb8-41"><a></a><span class="st">            instructor_id   INTEGER REFERENCES instructors(id),</span></span>
<span id="cb8-42"><a></a><span class="st">            max_enrollment  INTEGER</span></span>
<span id="cb8-43"><a></a><span class="st">        );</span></span>
<span id="cb8-44"><a></a></span>
<span id="cb8-45"><a></a><span class="st">        CREATE TABLE schedules (</span></span>
<span id="cb8-46"><a></a><span class="st">            id          INTEGER PRIMARY KEY,</span></span>
<span id="cb8-47"><a></a><span class="st">            course_id   INTEGER REFERENCES courses(id),</span></span>
<span id="cb8-48"><a></a><span class="st">            days        TEXT,</span></span>
<span id="cb8-49"><a></a><span class="st">            time_start  TEXT,</span></span>
<span id="cb8-50"><a></a><span class="st">            time_end    TEXT,</span></span>
<span id="cb8-51"><a></a><span class="st">            room        TEXT,</span></span>
<span id="cb8-52"><a></a><span class="st">            semester    TEXT</span></span>
<span id="cb8-53"><a></a><span class="st">        );</span></span>
<span id="cb8-54"><a></a></span>
<span id="cb8-55"><a></a><span class="st">        CREATE VIRTUAL TABLE course_embeddings USING vec0(</span></span>
<span id="cb8-56"><a></a><span class="st">            course_id INTEGER PRIMARY KEY,</span></span>
<span id="cb8-57"><a></a><span class="st">            embedding FLOAT[384]</span></span>
<span id="cb8-58"><a></a><span class="st">        );</span></span>
<span id="cb8-59"><a></a><span class="st">    """</span>)</span>
<span id="cb8-60"><a></a></span>
<span id="cb8-61"><a></a>    <span class="co"># --- Instructors ---</span></span>
<span id="cb8-62"><a></a>    cursor.executemany(</span>
<span id="cb8-63"><a></a>        <span class="st">"INSERT INTO instructors (name, email, department, bio) VALUES (?, ?, ?, ?)"</span>,</span>
<span id="cb8-64"><a></a>        [</span>
<span id="cb8-65"><a></a>            (<span class="st">"Dr. Sarah Chen"</span>, <span class="st">"s.chen@university.edu"</span>, <span class="st">"Computer Science"</span>,</span>
<span id="cb8-66"><a></a>             <span class="st">"Specializes in machine learning and NLP. Author of 'Practical Deep Learning'."</span>),</span>
<span id="cb8-67"><a></a>            (<span class="st">"Prof. Marcus Webb"</span>, <span class="st">"m.webb@university.edu"</span>, <span class="st">"Computer Science"</span>,</span>
<span id="cb8-68"><a></a>             <span class="st">"Focuses on systems programming and computer architecture."</span>),</span>
<span id="cb8-69"><a></a>            (<span class="st">"Dr. Priya Nair"</span>, <span class="st">"p.nair@university.edu"</span>, <span class="st">"Data Science"</span>,</span>
<span id="cb8-70"><a></a>             <span class="st">"Expert in statistical learning, data visualization, and reproducible research."</span>),</span>
<span id="cb8-71"><a></a>            (<span class="st">"Prof. James Okafor"</span>, <span class="st">"j.okafor@university.edu"</span>, <span class="st">"Computer Science"</span>,</span>
<span id="cb8-72"><a></a>             <span class="st">"Teaches software engineering and has 10 years of industry experience at major tech firms."</span>),</span>
<span id="cb8-73"><a></a>            (<span class="st">"Dr. Elena Russo"</span>, <span class="st">"e.russo@university.edu"</span>, <span class="st">"Mathematics"</span>,</span>
<span id="cb8-74"><a></a>             <span class="st">"Research interests include linear algebra, optimization, and mathematical foundations of AI."</span>),</span>
<span id="cb8-75"><a></a>        ]</span>
<span id="cb8-76"><a></a>    )</span>
<span id="cb8-77"><a></a></span>
<span id="cb8-78"><a></a>    <span class="co"># --- Courses ---</span></span>
<span id="cb8-79"><a></a>    cursor.executemany(</span>
<span id="cb8-80"><a></a>        <span class="st">"""INSERT INTO courses (code, title, description, credits, level, instructor_id, max_enrollment)</span></span>
<span id="cb8-81"><a></a><span class="st">           VALUES (?, ?, ?, ?, ?, ?, ?)"""</span>,</span>
<span id="cb8-82"><a></a>        [</span>
<span id="cb8-83"><a></a>            (<span class="st">"CS-101"</span>, <span class="st">"Introduction to Programming"</span>,</span>
<span id="cb8-84"><a></a>             <span class="st">"Fundamentals of programming using Python. Covers variables, control flow, functions, and basic data structures."</span>,</span>
<span id="cb8-85"><a></a>             <span class="dv">3</span>, <span class="st">"intro"</span>, <span class="dv">2</span>, <span class="dv">40</span>),</span>
<span id="cb8-86"><a></a>            (<span class="st">"CS-201"</span>, <span class="st">"Data Structures and Algorithms"</span>,</span>
<span id="cb8-87"><a></a>             <span class="st">"Core data structures including linked lists, trees, graphs, and hash tables. Algorithm design and complexity analysis."</span>,</span>
<span id="cb8-88"><a></a>             <span class="dv">3</span>, <span class="st">"intermediate"</span>, <span class="dv">2</span>, <span class="dv">35</span>),</span>
<span id="cb8-89"><a></a>            (<span class="st">"CS-301"</span>, <span class="st">"Machine Learning Fundamentals"</span>,</span>
<span id="cb8-90"><a></a>             <span class="st">"Supervised and unsupervised learning, model evaluation, feature engineering, and scikit-learn. Final project required."</span>,</span>
<span id="cb8-91"><a></a>             <span class="dv">4</span>, <span class="st">"intermediate"</span>, <span class="dv">1</span>, <span class="dv">30</span>),</span>
<span id="cb8-92"><a></a>            (<span class="st">"CS-394"</span>, <span class="st">"How Generative AI Works"</span>,</span>
<span id="cb8-93"><a></a>             <span class="st">"Transformer architectures, large language models, prompt engineering, fine-tuning, and deployment. Hands-on with open-source models."</span>,</span>
<span id="cb8-94"><a></a>             <span class="dv">3</span>, <span class="st">"advanced"</span>, <span class="dv">1</span>, <span class="dv">25</span>),</span>
<span id="cb8-95"><a></a>            (<span class="st">"CS-310"</span>, <span class="st">"Database Systems"</span>,</span>
<span id="cb8-96"><a></a>             <span class="st">"Relational database design, SQL, transactions, indexing, and an introduction to NoSQL systems."</span>,</span>
<span id="cb8-97"><a></a>             <span class="dv">3</span>, <span class="st">"intermediate"</span>, <span class="dv">4</span>, <span class="dv">20</span>),</span>
<span id="cb8-98"><a></a>        ]</span>
<span id="cb8-99"><a></a>    )</span>
<span id="cb8-100"><a></a></span>
<span id="cb8-101"><a></a>    <span class="co"># --- Schedules ---</span></span>
<span id="cb8-102"><a></a>    cursor.executemany(</span>
<span id="cb8-103"><a></a>        <span class="st">"""INSERT INTO schedules (course_id, days, time_start, time_end, room, semester)</span></span>
<span id="cb8-104"><a></a><span class="st">           VALUES (?, ?, ?, ?, ?, ?)"""</span>,</span>
<span id="cb8-105"><a></a>        [</span>
<span id="cb8-106"><a></a>            (<span class="dv">1</span>, <span class="st">"Mon/Wed/Fri"</span>, <span class="st">"09:00"</span>, <span class="st">"09:50"</span>, <span class="st">"Room 101"</span>, <span class="st">"Spring 2026"</span>),</span>
<span id="cb8-107"><a></a>            (<span class="dv">2</span>, <span class="st">"Tue/Thu"</span>,     <span class="st">"10:00"</span>, <span class="st">"11:20"</span>, <span class="st">"Room 204"</span>, <span class="st">"Spring 2026"</span>),</span>
<span id="cb8-108"><a></a>            (<span class="dv">3</span>, <span class="st">"Mon/Wed"</span>,     <span class="st">"13:00"</span>, <span class="st">"14:20"</span>, <span class="st">"Lab 12"</span>,   <span class="st">"Spring 2026"</span>),</span>
<span id="cb8-109"><a></a>            (<span class="dv">4</span>, <span class="st">"Tue/Thu"</span>,     <span class="st">"14:00"</span>, <span class="st">"15:20"</span>, <span class="st">"Lab 12"</span>,   <span class="st">"Spring 2026"</span>),</span>
<span id="cb8-110"><a></a>            (<span class="dv">5</span>, <span class="st">"Mon/Wed/Fri"</span>, <span class="st">"11:00"</span>, <span class="st">"11:50"</span>, <span class="st">"Room 305"</span>, <span class="st">"Spring 2026"</span>),</span>
<span id="cb8-111"><a></a>        ]</span>
<span id="cb8-112"><a></a>    )</span>
<span id="cb8-113"><a></a></span>
<span id="cb8-114"><a></a>    conn.commit()</span>
<span id="cb8-115"><a></a></span>
<span id="cb8-116"><a></a>    <span class="co"># --- Embeddings ---</span></span>
<span id="cb8-117"><a></a>    <span class="co"># Embed each course as "title: description" so the vector captures both</span></span>
<span id="cb8-118"><a></a>    <span class="bu">print</span>(<span class="st">"Generating embeddings..."</span>)</span>
<span id="cb8-119"><a></a>    courses <span class="op">=</span> conn.execute(<span class="st">"SELECT id, title, description FROM courses"</span>).fetchall()</span>
<span id="cb8-120"><a></a>    <span class="cf">for</span> course <span class="kw">in</span> courses:</span>
<span id="cb8-121"><a></a>        text <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>course[<span class="st">'title'</span>]<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>course[<span class="st">'description'</span>]<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb8-122"><a></a>        embedding <span class="op">=</span> embedder.encode(text).astype(np.float32)</span>
<span id="cb8-123"><a></a>        cursor.execute(</span>
<span id="cb8-124"><a></a>            <span class="st">"INSERT INTO course_embeddings (course_id, embedding) VALUES (?, ?)"</span>,</span>
<span id="cb8-125"><a></a>            (course[<span class="st">'id'</span>], embedding.tobytes())</span>
<span id="cb8-126"><a></a>        )</span>
<span id="cb8-127"><a></a></span>
<span id="cb8-128"><a></a>    conn.commit()</span>
<span id="cb8-129"><a></a>    <span class="bu">print</span>(<span class="st">"Database created and populated successfully."</span>)</span>
<span id="cb8-130"><a></a>    <span class="bu">print</span>(<span class="ss">f"  - </span><span class="sc">{</span>cursor<span class="sc">.</span>execute(<span class="st">'SELECT COUNT(*) FROM instructors'</span>)<span class="sc">.</span>fetchone()[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> instructors"</span>)</span>
<span id="cb8-131"><a></a>    <span class="bu">print</span>(<span class="ss">f"  - </span><span class="sc">{</span>cursor<span class="sc">.</span>execute(<span class="st">'SELECT COUNT(*) FROM courses'</span>)<span class="sc">.</span>fetchone()[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> courses"</span>)</span>
<span id="cb8-132"><a></a>    <span class="bu">print</span>(<span class="ss">f"  - </span><span class="sc">{</span>cursor<span class="sc">.</span>execute(<span class="st">'SELECT COUNT(*) FROM schedules'</span>)<span class="sc">.</span>fetchone()[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> schedules"</span>)</span>
<span id="cb8-133"><a></a>    <span class="bu">print</span>(<span class="ss">f"  - </span><span class="sc">{</span>cursor<span class="sc">.</span>execute(<span class="st">'SELECT COUNT(*) FROM course_embeddings'</span>)<span class="sc">.</span>fetchone()[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> embeddings"</span>)</span>
<span id="cb8-134"><a></a></span>
<span id="cb8-135"><a></a>    <span class="cf">return</span> conn</span>
<span id="cb8-136"><a></a></span>
<span id="cb8-137"><a></a>conn <span class="op">=</span> create_and_populate_db()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="how-rag-works-2" class="slide level2">
<h2>How RAG Works</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/rag.ipynb" data-notebook-title="RAG (Retrieval Augmented Generation)" data-notebook-cellid="build-context">
<div id="build-context" class="cell" data-execution_count="16">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a></a><span class="kw">def</span> search_courses(conn, user_query, top_k<span class="op">=</span><span class="dv">3</span>):</span>
<span id="cb9-2"><a></a>    <span class="co">"""</span></span>
<span id="cb9-3"><a></a><span class="co">    Embed the user query and find the most semantically similar courses.</span></span>
<span id="cb9-4"><a></a><span class="co">    Returns the top_k closest courses with full details.</span></span>
<span id="cb9-5"><a></a><span class="co">    """</span></span>
<span id="cb9-6"><a></a>    query_embedding <span class="op">=</span> embedder.encode(user_query).astype(np.float32)</span>
<span id="cb9-7"><a></a></span>
<span id="cb9-8"><a></a>    <span class="cf">return</span> conn.execute(<span class="st">"""</span></span>
<span id="cb9-9"><a></a><span class="st">        SELECT</span></span>
<span id="cb9-10"><a></a><span class="st">            c.code,</span></span>
<span id="cb9-11"><a></a><span class="st">            c.title,</span></span>
<span id="cb9-12"><a></a><span class="st">            c.description,</span></span>
<span id="cb9-13"><a></a><span class="st">            c.credits,</span></span>
<span id="cb9-14"><a></a><span class="st">            c.level,</span></span>
<span id="cb9-15"><a></a><span class="st">            c.max_enrollment,</span></span>
<span id="cb9-16"><a></a><span class="st">            i.name AS instructor,</span></span>
<span id="cb9-17"><a></a><span class="st">            i.email AS instructor_email,</span></span>
<span id="cb9-18"><a></a><span class="st">            s.days,</span></span>
<span id="cb9-19"><a></a><span class="st">            s.time_start,</span></span>
<span id="cb9-20"><a></a><span class="st">            s.time_end,</span></span>
<span id="cb9-21"><a></a><span class="st">            s.room,</span></span>
<span id="cb9-22"><a></a><span class="st">            s.semester,</span></span>
<span id="cb9-23"><a></a><span class="st">            e.distance</span></span>
<span id="cb9-24"><a></a><span class="st">        FROM course_embeddings e</span></span>
<span id="cb9-25"><a></a><span class="st">        JOIN courses c    ON e.course_id = c.id</span></span>
<span id="cb9-26"><a></a><span class="st">        JOIN instructors i ON c.instructor_id = i.id</span></span>
<span id="cb9-27"><a></a><span class="st">        JOIN schedules s   ON s.course_id = c.id</span></span>
<span id="cb9-28"><a></a><span class="st">        WHERE e.embedding MATCH ?</span></span>
<span id="cb9-29"><a></a><span class="st">          AND k = ?</span></span>
<span id="cb9-30"><a></a><span class="st">        ORDER BY e.distance</span></span>
<span id="cb9-31"><a></a><span class="st">    """</span>, (query_embedding.tobytes(), top_k)).fetchall()</span>
<span id="cb9-32"><a></a></span>
<span id="cb9-33"><a></a></span>
<span id="cb9-34"><a></a><span class="kw">def</span> rows_to_text(rows):</span>
<span id="cb9-35"><a></a>    <span class="cf">if</span> <span class="kw">not</span> rows:</span>
<span id="cb9-36"><a></a>        <span class="cf">return</span> <span class="st">"No results found."</span></span>
<span id="cb9-37"><a></a>    <span class="cf">if</span> <span class="bu">isinstance</span>(rows, sqlite3.Row):</span>
<span id="cb9-38"><a></a>        rows <span class="op">=</span> [rows]</span>
<span id="cb9-39"><a></a>    <span class="cf">return</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>.join(</span>
<span id="cb9-40"><a></a>        <span class="st">"  "</span> <span class="op">+</span> <span class="st">", "</span>.join(<span class="ss">f"</span><span class="sc">{</span>k<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>row[k]<span class="sc">}</span><span class="ss">"</span> <span class="cf">for</span> k <span class="kw">in</span> row.keys())</span>
<span id="cb9-41"><a></a>        <span class="cf">for</span> row <span class="kw">in</span> rows</span>
<span id="cb9-42"><a></a>    )</span>
<span id="cb9-43"><a></a></span>
<span id="cb9-44"><a></a></span>
<span id="cb9-45"><a></a><span class="kw">def</span> build_context(conn, user_query):</span>
<span id="cb9-46"><a></a>    rows <span class="op">=</span> search_courses(conn, user_query)</span>
<span id="cb9-47"><a></a>    <span class="cf">return</span> <span class="ss">f"Most relevant courses for the query:</span><span class="ch">\n</span><span class="sc">{</span>rows_to_text(rows)<span class="sc">}</span><span class="ss">"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="how-rag-works-3" class="slide level2">
<h2>How RAG Works</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/rag.ipynb" data-notebook-title="RAG (Retrieval Augmented Generation)" data-notebook-cellid="call-with">
<div id="call-with" class="cell" data-execution_count="17">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a></a><span class="co"># Connect to the sqlite database</span></span>
<span id="cb10-2"><a></a>conn <span class="op">=</span> create_and_populate_db()</span>
<span id="cb10-3"><a></a></span>
<span id="cb10-4"><a></a><span class="co"># Query the database based on the user prompt</span></span>
<span id="cb10-5"><a></a>context <span class="op">=</span> build_context(conn, USER_PROMPT)</span>
<span id="cb10-6"><a></a></span>
<span id="cb10-7"><a></a><span class="co"># Create system prompt</span></span>
<span id="cb10-8"><a></a>SYSTEM_PROMPT <span class="op">=</span> <span class="ss">f"""</span></span>
<span id="cb10-9"><a></a><span class="ss">You help students lookup course information. Here are the course details:</span></span>
<span id="cb10-10"><a></a></span>
<span id="cb10-11"><a></a><span class="ss">---COURSE INFORMATION---</span></span>
<span id="cb10-12"><a></a><span class="sc">{</span>context<span class="sc">}</span></span>
<span id="cb10-13"><a></a><span class="ss">---END COURSE INFORMATION---</span></span>
<span id="cb10-14"><a></a><span class="ss">"""</span></span>
<span id="cb10-15"><a></a></span>
<span id="cb10-16"><a></a><span class="co"># Query the model</span></span>
<span id="cb10-17"><a></a>response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb10-18"><a></a>    model<span class="op">=</span>MODEL,</span>
<span id="cb10-19"><a></a>    messages<span class="op">=</span>[</span>
<span id="cb10-20"><a></a>        {<span class="st">"role"</span>: <span class="st">"system"</span>, <span class="st">"content"</span>: SYSTEM_PROMPT},</span>
<span id="cb10-21"><a></a>        {<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: USER_PROMPT},</span>
<span id="cb10-22"><a></a>    ],</span>
<span id="cb10-23"><a></a>)</span>
<span id="cb10-24"><a></a>response.choices[<span class="dv">0</span>].message.content</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="how-rag-works-4" class="slide level2">
<h2>How RAG Works</h2>
<ul>
<li class="fragment">“Which courses teach about generative AI?”</li>
</ul>
</section>
<section id="how-rag-works-5" class="slide level2">
<h2>How RAG Works</h2>
<div class="quarto-embed-nb-cell" data-notebook="/home/runner/work/CS-394/CS-394/src/06/notebooks/rag.ipynb" data-notebook-title="RAG (Retrieval Augmented Generation)" data-notebook-cellid="call-with">
<div id="call-with" class="cell" data-execution_count="17">
<div class="cell-output cell-output-stdout">
<pre><code>Found existing database at '.data/course_catalog_rag.db'. Skipping creation.</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>'The course that specifically teaches about generative AI is:\n\n**CS-394: How Generative AI Works**  \n- **Description**: Covers transformer architectures, large language models, prompt engineering, fine-tuning, and deployment. Includes hands-on work with open-source models.  \n- **Details**:  \n  - Credits: 3 | Level: Advanced  \n  - Instructor: Dr. Sarah Chen | [Contact](mailto:s.chen@university.edu)  \n  - Time: Tue/Thu 14:00–15:20 | Room: Lab 12  \n  - Semester: Spring 2026  \n\nThis course directly addresses generative AI concepts and techniques.\n'</code></pre>
</div>
</div>
</div>
</section></section>
<section>
<section id="hands-on" class="title-slide slide level1 center">
<h1>Hands-on</h1>
<p>Investigate sql-augmented.ipynb and rag.ipynb</p>
<p>Try different queries. Which work well on both?</p>
<p>Recreate the database with different data.</p>
</section>
<section id="rag-databases" class="slide level2">
<h2>RAG Databases</h2>
<ul>
<li class="fragment">Extensions
<ul>
<li class="fragment">sqlite-vec: SQLite Extension (we’ve been using that!)</li>
<li class="fragment">pgvector: PostgreSQL extension</li>
</ul></li>
<li class="fragment">Libraries
<ul>
<li class="fragment">FAISS (Meta): In-memory vector index vs.&nbsp;database. Very fast.</li>
</ul></li>
</ul>
</section>
<section id="rag-databases-1" class="slide level2">
<h2>RAG Databases</h2>
<ul>
<li class="fragment">Pinecone: Popular commercial managed/cloud option.</li>
<li class="fragment">Qdrant: Open-source dedicated db, written in Rust.</li>
<li class="fragment">Milvus: Open-source. Heavier to operate, but can exceed a billion embeddings.</li>
</ul>
</section>
<section id="beyond-rag" class="slide level2">
<h2>Beyond RAG</h2>
<ul>
<li class="fragment">While system prompting and RAG go so far, there are cases where you want the model to do something beyond</li>
<li class="fragment">Examples</li>
<li class="fragment">Fine-Tuning</li>
</ul>
</section>
<section id="fine-tuning" class="slide level2">
<h2>Fine-Tuning</h2>
<ul>
<li class="fragment">TBD</li>
<li class="fragment">Why not train from scratch?</li>
<li class="fragment">History of fine-tuning</li>
<li class="fragment">When to fine-tune vs.&nbsp;when to use other approaches</li>
</ul>
</section></section>
<section>
<section id="generating-fine-tuning-training-data" class="title-slide slide level1 center">
<h1>Generating Fine-Tuning Training Data</h1>

</section>
<section id="generating-fine-tuning-training-data-1" class="slide level2">
<h2>Generating Fine-Tuning Training Data</h2>
<ul>
<li class="fragment">TBD</li>
<li class="fragment">Overview</li>
<li class="fragment">Train, validation, and test datasets</li>
</ul>
</section>
<section id="generating-fine-tuning-training-data-2" class="slide level2">
<h2>Generating Fine-Tuning Training Data</h2>
<ul>
<li class="fragment">Dimensionality of training data
<ul>
<li class="fragment">Why this is important</li>
</ul></li>
<li class="fragment">Dimensions
<ul>
<li class="fragment">Topics (areas, sub-domains)</li>
<li class="fragment">Audience (e.g., school grade)</li>
<li class="fragment">Length (e.g., short, med, long)</li>
<li class="fragment">Formats (e.g., script vs.&nbsp;romanized)</li>
<li class="fragment">Conversation turns (single / multi)</li>
<li class="fragment">Negative answers (e.g., if implementing safety)</li>
</ul></li>
<li class="fragment">Each of these can have weights also</li>
</ul>
</section>
<section id="training-data-format" class="slide level2">
<h2>Training Data format</h2>
<ul>
<li class="fragment">Conversational or raw?
<ul>
<li class="fragment">(and convert to template)</li>
</ul></li>
<li class="fragment">jsonl</li>
<li class="fragment">HF datasets</li>
</ul>
</section>
<section id="how-to-use-a-model-to-generate" class="slide level2">
<h2>How to use a model to generate</h2>
<ul>
<li class="fragment">Local or hosted?</li>
<li class="fragment">Generating in batches</li>
<li class="fragment">Structured outputs</li>
</ul>
</section>
<section id="walkthrough-how-to-do-this" class="slide level2">
<h2>Walkthrough how to do this</h2>
</section></section>
<section id="assignment" class="title-slide slide level1 center">
<h1>Assignment</h1>
<ul>
<li class="fragment">Pick a topic (or choose from these three)</li>
<li class="fragment">Generate the training datasets</li>
<li class="fragment">Upload to HF</li>
</ul>
</section>

<section>
<section id="looking-ahead" class="title-slide slide level1 center">
<h1>Looking Ahead</h1>

</section>
<section id="looking-ahead-1" class="slide level2">
<h2>Looking Ahead</h2>
<ul>
<li class="fragment"><a href="https://simonguest.github.io/CS-394/src/06/assignment.html" class="external" target="_blank">This week’s assignment!</a></li>
<li class="fragment">TBD</li>
</ul>
</section></section>
<section>
<section id="references" class="title-slide slide level1 center">
<h1>References</h1>

</section>
<section id="references-1" class="slide level2">
<h2>References</h2>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="../../theme/logos/DigiPen_RGB_Red.png" class="slide-logo"></p>
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.15,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("https:\/\/simonguest\.github\.io\/CS-394\/");
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>